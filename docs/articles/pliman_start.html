<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plant IMage Analysis â€¢ pliman</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Plant IMage Analysis">
<meta property="og:description" content="pliman">
<meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pliman</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/operations.html">Image Operations</a>
    </li>
    <li>
      <a href="../articles/manipulation.html">Image manipulation</a>
    </li>
    <li>
      <a href="../articles/segmentation.html">Image segmentation</a>
    </li>
    <li>
      <a href="../articles/count_objects.html">Count objects in an image</a>
    </li>
    <li>
      <a href="../articles/leaf_area.html">Measure leaf area</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    </li>
    <li>
      <a href="../CONTRIBUTING.html">Contributing</a>
    </li>
    <li>
      <a href="../ISSUE_TEMPLATE.html">Issues</a>
    </li>
    <li>
      <a href="../SUPPORT.html">Support</a>
    </li>
    <li>
      <a href="../LICENSE.html">Licence</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.researchgate.net/profile/Tiago_Olivoto2">RG</a>
</li>
<li>
  <a href="https://github.com/TiagoOlivoto">
    <span class="fab fab-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/tolivoto">
    <span class="fab fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa-mendeley"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="pliman_start_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Plant IMage Analysis</h1>
                        <h4 class="author">Tiago Olivoto</h4>
            
            <h4 class="date">2021-06-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/master/vignettes/pliman_start.Rmd"><code>vignettes/pliman_start.Rmd</code></a></small>
      <div class="hidden name"><code>pliman_start.Rmd</code></div>

    </div>

    
    
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h1>
<p><code>pliman</code> (<strong>pl</strong>ant <strong>im</strong>age <strong>an</strong>alysis) is designed to analyze plant images, especially related to leaf analysis. You provide color palettes, tell <code>pliman</code> what each one represents, and it takes care of the details. The package will help you to:</p>
<ul>
<li>Measure leaf area with <code><a href="../reference/leaf_area.html">leaf_area()</a></code>.</li>
<li>Measure disease severity with <code><a href="../reference/symptomatic_area.html">symptomatic_area()</a></code>.</li>
<li>Count the number of lesions with <code><a href="../reference/count_lesions.html">count_lesions()</a></code>.</li>
<li>Count objects in an image with <code><a href="../reference/count_objects.html">count_objects()</a></code>.</li>
<li>Get the RGB values for each object in an image with <code><a href="../reference/objects_rgb.html">objects_rgb()</a></code>.</li>
<li>Get object measures with <code><a href="../reference/utils_measures.html">get_measures()</a></code>.</li>
<li>Plot objec measures with <code><a href="../reference/utils_measures.html">plot_measures()</a></code>.</li>
</ul>
</div>
<div id="leaf-area" class="section level1">
<h1 class="hasAnchor">
<a href="#leaf-area" class="anchor"></a>Leaf area</h1>
<p>The function <code><a href="../reference/leaf_area.html">leaf_area()</a></code> can be used to computes the leaf area using an image with leaves and a template with a known area. A general linear model (binomial family) fitted to the RGB values is used to first separate the leaves and template from the background and then the leaves from the template. The leaf area is then calculated for each leaf based on the pixel area.</p>
<p>In the following example, the area of five three leaves will be computed using a reference template with a known area of 4 cm<span class="math inline">\(^2\)</span>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman">pliman</a></span><span class="op">)</span>
<span class="co"># |========================================================|</span>
<span class="co"># | Tools for Plant Image Analysis (pliman 0.3.0)          |</span>
<span class="co"># | Author: Tiago Olivoto                                  |</span>
<span class="co"># | Type 'vignette('pliman_start')' for a short tutorial   |</span>
<span class="co"># | Visit 'https://bit.ly/3eL0dF3' for a complete tutorial |</span>
<span class="co"># |========================================================|</span>
<span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_pattern.JPG"</span><span class="op">)</span><span class="op">)</span>
<span class="va">leaf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_leaf.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tmpl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_temp.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="va">background</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_back.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">img</span>, <span class="va">leaf</span>, <span class="va">tmpl</span>, <span class="va">background</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-1-1.png" width="480"></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># Computes the leaf area</span>
<span class="va">area</span> <span class="op">&lt;-</span> 
<span class="fu"><a href="../reference/leaf_area.html">leaf_area</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,
          img_leaf <span class="op">=</span> <span class="va">leaf</span>,
          img_template <span class="op">=</span> <span class="va">tmpl</span>,
          img_background <span class="op">=</span> <span class="va">background</span>,
          area_template <span class="op">=</span> <span class="fl">4</span>,
          text_col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-1-2.png" width="480"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span>
<span class="co"># -----------------------------------------</span>
<span class="co"># Total leaf area  : 142.724 </span>
<span class="co"># Average leaf area: 23.787 </span>
<span class="co"># -----------------------------------------</span>
<span class="co">#   id       x       y   area perimeter radius_mean radius_min radius_max</span>
<span class="co"># 1  1 510.870 194.816 33.623       748     130.927    113.109    174.695</span>
<span class="co"># 2  2 206.729 201.344 27.026       709     119.412     93.029    170.339</span>
<span class="co"># 3  3 123.420 557.361 30.651       787     128.717     95.703    189.297</span>
<span class="co"># 4  4 622.974 585.408 39.340       863     143.373    108.206    202.830</span>
<span class="co"># 5  5 364.747 508.590  8.085       375      64.294     51.447     86.207</span>
<span class="co">#   radius_sd radius_ratio</span>
<span class="co"># 1    15.337        1.544</span>
<span class="co"># 2    19.262        1.831</span>
<span class="co"># 3    24.557        1.978</span>
<span class="co"># 4    25.136        1.874</span>
<span class="co"># 5     9.710        1.676</span></code></pre></div>
</div>
<div id="counting-crop-grains" class="section level1">
<h1 class="hasAnchor">
<a href="#counting-crop-grains" class="anchor"></a>Counting crop grains</h1>
<p>Here, we will count the grains in the image <code>soybean_touch.png</code>. This image has a cyan background and contains 30 soybean grains that touch with each other.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">soy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_touch.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/utils_image.html">image_show</a></span><span class="op">(</span><span class="va">soy</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-2-1.png" width="480"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Count the objects in the image</span>
<span class="va">grains</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/count_objects.html">count_objects</a></span><span class="op">(</span><span class="va">soy</span><span class="op">)</span>
<span class="co"># </span>
<span class="co"># --------------------------------------------</span>
<span class="co"># Number of objects: 30 </span>
<span class="co"># --------------------------------------------</span>
<span class="co">#  statistics       area   perimeter</span>
<span class="co">#         min  1366.0000  117.000000</span>
<span class="co">#        mean  2057.3667  146.600000</span>
<span class="co">#         max  2445.0000  158.000000</span>
<span class="co">#          sd   230.5574    8.406073</span>
<span class="co">#         sum 61721.0000 4398.000000</span>

<span class="co"># Draws the object id (by default)</span>
<span class="fu"><a href="../reference/utils_measures.html">plot_measures</a></span><span class="op">(</span><span class="va">grains</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-2-2.png" width="480"></p>
</div>
<div id="disease-severity" class="section level1">
<h1 class="hasAnchor">
<a href="#disease-severity" class="anchor"></a>Disease severity</h1>
<p>The function <code><a href="../reference/symptomatic_area.html">symptomatic_area()</a></code> is used to compute the percentage of symptomatic leaf area in a sample or entire leaf based on provided color palettes samples. A general linear model (binomial family) fitted to the RGB values is used to segment the lesions from the healthy leaf. If a pallet of background is provided, the function takes care of the details to isolate it before computing the number and area of lesions.</p>
<p>The next example computes the symptomatic area of a soybean leaf. The proportion of the healthy and symptomatic areas is given as the proportion of the total leaf area, after segmenting the leaf from the background (blue).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"sev_leaf.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="va">healthy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"sev_healthy.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="va">symptoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"sev_sympt.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="va">background</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"sev_back.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">img</span>, <span class="va">healthy</span>, <span class="va">symptoms</span>,<span class="va">background</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-3-1.png" width="480"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Computes the symptomatic area</span>
<span class="fu"><a href="../reference/symptomatic_area.html">symptomatic_area</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img</span>,
                 img_healthy <span class="op">=</span> <span class="va">healthy</span>,
                 img_symptoms <span class="op">=</span> <span class="va">symptoms</span>,
                 img_background <span class="op">=</span> <span class="va">background</span>,
                 show_image <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-3-2.png" width="480"></p>
<pre><code>#    healthy symptomatic
# 1 89.03889    10.96111</code></pre>
</div>
<div id="rgb-values-for-objects" class="section level1">
<h1 class="hasAnchor">
<a href="#rgb-values-for-objects" class="anchor"></a>RGB values for objects</h1>
<p>The function <code><a href="../reference/objects_rgb.html">objects_rgb()</a></code> can be used to get the Red Green and Blue (RGB) for objects in an image. Here, the RGB for</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_import</a></span><span class="op">(</span><span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soy_green.jpg"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Segment the foreground (grains) using the normalized blue index</span>
<span class="co"># Shows the average value of the blue index in each object</span>
<span class="va">rgb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/objects_rgb.html">objects_rgb</a></span><span class="op">(</span><span class="va">img</span>, marker <span class="op">=</span> <span class="st">"index"</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-4-1.png" width="480"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Draw the object id</span>
<span class="fu"><a href="../reference/utils_image.html">image_show</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span>
<span class="fu"><a href="../reference/utils_measures.html">plot_measures</a></span><span class="op">(</span><span class="va">rgb</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-4-2.png" width="480"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># plot the distribution of RGB values of each object</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">rgb</span><span class="op">)</span></code></pre></div>
<p><img src="pliman_start_files/figure-html/unnamed-chunk-4-3.png" width="480"></p>
</div>
<div id="getting-help" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting help</h1>
<ul>
<li><p>If you encounter a clear bug, please file a minimal reproducible example on <a href="https://github.com/TiagoOlivoto/pliman/issues">github</a></p></li>
<li><p>Suggestions and criticisms to improve the quality and usability of the package are welcome!</p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://olivoto.netlify.app/">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
