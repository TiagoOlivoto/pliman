<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pliman">
<title>Image segmentation with pliman • pliman</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Image segmentation with pliman">
<meta property="og:description" content="pliman">
<meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a>
    <a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a>
    <a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a>
    <a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a>
    <a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Package news</a>
    <a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-more">More</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-more">
    <a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    <a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a>
    <a class="dropdown-item" href="../SUPPORT.html">Support</a>
    <a class="dropdown-item" href="../LICENSE.html">Licence</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2">
    <span class="fab fa fab fa-researchgate fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TiagoOlivoto">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/tolivoto">
    <span class="fab fa fab fa-twitter fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa fab fa-mendeley fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Image segmentation with pliman</h1>
                        <h4 data-toc-skip class="author">Tiago Olivoto</h4>
            
            <h4 data-toc-skip class="date">2021-12-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/HEAD/vignettes/segmentation.Rmd" class="external-link"><code>vignettes/segmentation.Rmd</code></a></small>
      <div class="d-none name"><code>segmentation.Rmd</code></div>
    </div>

    
    
<div class="section level1">
<h1 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h1>
<p>Image segmentation is the process of partitioning a digital image into multiple segments (sets of pixels or image objects). In the context of plant image analysis, segmentation is used to simplify the representation of an image into something easier to analyze. For example, when using <code><a href="../reference/count_objects.html">count_objects()</a></code> to count crop grains, first the grains need to be isolated (segmented) from the background. In <code>pliman</code> the following functions can be used to segment an image.</p>
<p>In <code>pliman</code> the following functions can be used to segment an image.</p>
<ul>
<li>
<code><a href="../reference/image_binary.html">image_binary()</a></code> to produce a binary (black and white) image</li>
<li>
<code><a href="../reference/image_segment.html">image_segment()</a></code> to produce a segmented image (image objects and a white background).</li>
<li>
<code><a href="../reference/image_segment.html">image_segment_iter()</a></code> to segment an image iteratively.</li>
</ul>
<p>Both functions segment the image based on the value of some image index, which may be one of the RGB bands or any operation with these bands. Internally, these functions call <code><a href="../reference/image_index.html">image_index()</a></code> to compute these indexes. The following indexes are currently available.</p>
<table class="table">
<thead><tr class="header">
<th>Index</th>
<th align="center">Equation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>R</td>
<td align="center">R</td>
</tr>
<tr class="even">
<td>G</td>
<td align="center">G</td>
</tr>
<tr class="odd">
<td>B</td>
<td align="center">B</td>
</tr>
<tr class="even">
<td>NR</td>
<td align="center">R/(R+G+B)</td>
</tr>
<tr class="odd">
<td>NG</td>
<td align="center">G/(R+G+B)</td>
</tr>
<tr class="even">
<td>NB</td>
<td align="center">B/(R+G+B)</td>
</tr>
<tr class="odd">
<td>GB</td>
<td align="center">G/B</td>
</tr>
<tr class="even">
<td>RB</td>
<td align="center">R/B</td>
</tr>
<tr class="odd">
<td>GR</td>
<td align="center">G/R</td>
</tr>
<tr class="even">
<td>BI</td>
<td align="center">sqrt((R^2+G^2+B^2)/3)</td>
</tr>
<tr class="odd">
<td>BIM</td>
<td align="center">sqrt((R*2+G*2+B*2)/3)</td>
</tr>
<tr class="even">
<td>SCI</td>
<td align="center">(R-G)/(R+G)</td>
</tr>
<tr class="odd">
<td>GLI</td>
<td align="center">(2*G-R-B)/(2*G+R+B)</td>
</tr>
<tr class="even">
<td>HI</td>
<td align="center">(2*R-G-B)/(G-B)</td>
</tr>
<tr class="odd">
<td>NGRDI</td>
<td align="center">(G-R)/(G+R)</td>
</tr>
<tr class="even">
<td>NDGBI</td>
<td align="center">(G-B)/(G+B)</td>
</tr>
<tr class="odd">
<td>NDRBI</td>
<td align="center">(R-B)/(R+B)</td>
</tr>
<tr class="even">
<td>I</td>
<td align="center">R+G+B</td>
</tr>
<tr class="odd">
<td>S</td>
<td align="center">((R+G+B)-3*B)/(R+G+B)</td>
</tr>
<tr class="even">
<td>VARI</td>
<td align="center">(G-R)/(G+R-B)</td>
</tr>
<tr class="odd">
<td>HUE</td>
<td align="center">atan(2*(B-G-R)/30.5*(G-R))</td>
</tr>
<tr class="even">
<td>HUE2</td>
<td align="center">atan(2*(R-G-R)/30.5*(G-B))</td>
</tr>
<tr class="odd">
<td>BGI</td>
<td align="center">B/G</td>
</tr>
<tr class="even">
<td>L</td>
<td align="center">R+G+B/3</td>
</tr>
<tr class="odd">
<td>GRAY</td>
<td align="center">0.299*R + 0.587*G + 0.114*B</td>
</tr>
</tbody>
</table>
<p>Here, I use the argument <code>index"</code> to test the segmentation based on the RGB and their normalized values. Users can also provide their index with the argument <code>my_index</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span>
<span class="co">#&gt; |==========================================================|</span>
<span class="co">#&gt; | Tools for Plant Image Analysis (pliman 1.0.0)            |</span>
<span class="co">#&gt; | Author: Tiago Olivoto                                    |</span>
<span class="co">#&gt; | Type 'vignette('pliman_start')' for a short tutorial     |</span>
<span class="co">#&gt; | Visit 'http://bit.ly/pkg_pliman' for a complete tutorial |</span>
<span class="co">#&gt; |==========================================================|</span>
<span class="va">soy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_touch.jpg"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compute the indexes</span>
<span class="va">indexes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/image_index.html">image_index</a></span><span class="op">(</span><span class="va">soy</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R, G, B, NR, NG, NB"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation2-1.png" width="960"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Create a raster plot with the RGB values</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">indexes</span><span class="op">)</span>
<span class="co">#&gt; Warning in levelplot.formula(value ~ id * y | spectrum, layout = c(ncol, :</span>
<span class="co">#&gt; device support for raster images unknown, ignoring 'raster=TRUE'</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation2-2.png" width="960"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Create a density plot with the RGB values</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">indexes</span>, type <span class="op">=</span> <span class="st">"density"</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation2-3.png" width="960"></p>
<p>In this example, we can see the distribution of the RGB values (first row) and the normalized RGB values (second row). The two peaks represent the grains (smaller peak) and the blue background (larger peak). The clearer the difference between these peaks, the better will the image segmentation.</p>
<div class="section level2">
<h2 id="segment-an-image">Segment an image<a class="anchor" aria-label="anchor" href="#segment-an-image"></a>
</h2>
<p>The function <code>image_segmentation()</code> is used to segment images using image indexes. In this example, I will use the same indexes computed below to see how the image is segmented. The output of this function can be used as input in the function <code><a href="../reference/analyze_objects.html">analyze_objects()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">segmented</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/image_segment.html">image_segment</a></span><span class="op">(</span><span class="va">soy</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R, G, B, NR, NG, NB"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation3-1.png" width="960"></p>
<p>It seems that the <code>"NB"</code> index provided better segmentation. <code>"R"</code> and <code>"NR"</code> resulted in an inverted segmented image, i.e., the grains were considered as background and the remaining as ‘selected’ image. To circumvent this problem, we can use the argument <code>invert</code> in those functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/image_segment.html">image_segment</a></span><span class="op">(</span><span class="va">soy</span>,
              index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R, NR"</span><span class="op">)</span>,
              invert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation4-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="iterative-segmentation">Iterative segmentation<a class="anchor" aria-label="anchor" href="#iterative-segmentation"></a>
</h2>
<p>The function <code><a href="../reference/image_segment.html">image_segment_iter()</a></code> provides an iterative image segmentation, returning the proportions of segmented pixels. This is useful when more than one segmentation procedure is needed. Users can choose how many segmentation perform, using the argument <code>nseg</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">seg_iter</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"sev_leaf_nb.jpg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation5-1.png" width="700"></p>
<p>Using a soybean sample leaf (above), I will use the function <code>image_segment_iter</code> to segment the diseased tissue from healthy tissue. The aim is to segment the symptoms into two classes, namely, necrosis (brown areas) and chlorosis (yellow areas), and compute the percentage of each symptom class.</p>
<p>First, we need to find a suitable index for segmentation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First segmentation</span>
<span class="va">seg</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/image_segment.html">image_segment</a></span><span class="op">(</span><span class="va">seg_iter</span>,
                index <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation6-1.png" width="960"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># second segmentation</span>
<span class="va">seg2</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/image_segment.html">image_segment</a></span><span class="op">(</span><span class="va">seg</span><span class="op">$</span><span class="va">VARI</span><span class="op">$</span><span class="va">image</span>,
                index <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation6-2.png" width="960"></p>
<p>Note that the same results can be obtained with <code><a href="../reference/image_segment.html">image_segment_iter()</a></code> using an iterative section.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Only run iteratively</span>
<span class="fu"><a href="../reference/image_segment.html">image_segment_iter</a></span><span class="op">(</span><span class="va">seg_iter</span>, nseg <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p>The <code>"VARI"</code> seems to be a suitable index to segment symptoms (necrosis and chlorosis) from healthy tissues. The <code>"GLI"</code> can be used to segment necrosis from chlorosis. Knowing this, we can now use <code><a href="../reference/image_segment.html">image_segment_iter()</a></code> explicitly indicating these indexes, as follows</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="../reference/image_segment.html">image_segment_iter</a></span><span class="op">(</span><span class="va">seg_iter</span>,
                   nseg <span class="op">=</span> <span class="fl">2</span>, <span class="co"># two segmentations</span>
                   index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARI"</span>, <span class="st">"GLI"</span><span class="op">)</span>,
                   ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;      image  pixels   percent</span>
<span class="co">#&gt; 1 original 1317600 100.00000</span>
<span class="co">#&gt; 2     seg1  399075  30.28802</span>
<span class="co">#&gt; 3     seg2  103464  25.92595</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation8-1.png" width="960"></p>
<p>It can be observed that 30.28% of the original image were characterized as symptoms (both necrosis and chlorosis). Of out this (symptomatic area), 25.92% are necrotic areas. So 7.85% of the total area were considered as necrotic areas (30.288 <span class="math inline">\(\times\)</span> 0.2592 or 103464/1317600 <span class="math inline">\(\times\)</span> 100) and 22.43% (30.28 - 7.85 or (399075 - 103464) / 1317600 <span class="math inline">\(\times\)</span> 100) were considered as chlorotic areas.</p>
<p>Users can use the argument <code>threshold</code> to controls how segmentation is made. By default (<code>threshold = "Otsu"</code>), a threshold value based on Otsu’s method is used to reduce the grayscale image to a binary image. If a numeric value is informed, this value will be used as a threshold. Inform any non-numeric value different than <code>"Otsu"</code> to iteratively chosen the threshold based on a raster plot showing pixel intensity of the index. For <code>image_segmentation_iter()</code>, a vector (allows a mixed (numeric and character) type) with the same length of <code>nseg</code> can be used.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">seg_iter1</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/image_segment.html">image_segment_iter</a></span><span class="op">(</span><span class="va">seg_iter</span>,
                     nseg <span class="op">=</span> <span class="fl">2</span>, <span class="co"># two segmentations</span>
                     index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARI"</span>, <span class="st">"GLI"</span><span class="op">)</span>,
                     threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="st">"Otsu"</span><span class="op">)</span>,
                     ncol <span class="op">=</span> <span class="fl">3</span>,
                     show_image <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt;      image  pixels   percent</span>
<span class="co">#&gt; 1 original 1317600 100.00000</span>
<span class="co">#&gt; 2     seg1  195288  14.82149</span>
<span class="co">#&gt; 3     seg2   95151  48.72342</span>
<span class="va">seg_iter2</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/image_segment.html">image_segment_iter</a></span><span class="op">(</span><span class="va">seg_iter</span>,
                     nseg <span class="op">=</span> <span class="fl">2</span>, <span class="co"># two segmentations</span>
                     index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VARI"</span>, <span class="st">"GLI"</span><span class="op">)</span>,
                     threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"Otsu"</span><span class="op">)</span>,
                     ncol <span class="op">=</span> <span class="fl">3</span>,
                     show_image <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt;      image  pixels   percent</span>
<span class="co">#&gt; 1 original 1317600 100.00000</span>
<span class="co">#&gt; 2     seg1  321729  24.41781</span>
<span class="co">#&gt; 3     seg2  101883  31.66733</span>

<span class="fu"><a href="../reference/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">seg_iter1</span><span class="op">$</span><span class="va">images</span><span class="op">$</span><span class="va">seg1</span>,
              <span class="va">seg_iter2</span><span class="op">$</span><span class="va">images</span><span class="op">$</span><span class="va">seg1</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/segmentation9-1.png" width="960"></p>
<p>Users can then set the argument <code>threshold</code> for their specific case, depending on the aims of the segmentation.</p>
</div>
</div>
<div class="section level1">
<h1 id="producing-a-binary-image">Producing a binary image<a class="anchor" aria-label="anchor" href="#producing-a-binary-image"></a>
</h1>
<p>We can also produce a binary image with <code><a href="../reference/image_binary.html">image_binary()</a></code>. Just for curiosity, we will use the indexes <code>"B"</code> (blue) and <code>"NB"</code> (normalized blue). By default, <code><a href="../reference/image_binary.html">image_binary()</a></code> rescales the image to 30% of the size of the original image to speed up the computation time. Use the argument <code>resize = FALSE</code> to produce a binary image with the original size.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/image_binary.html">image_binary</a></span><span class="op">(</span><span class="va">soy</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/binary1-1.png" width="960"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># original image size</span>
<span class="fu"><a href="../reference/image_binary.html">image_binary</a></span><span class="op">(</span><span class="va">soy</span>,
             index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B, NB"</span><span class="op">)</span>,
             resize <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="segmentation_files/figure-html/binary1-2.png" width="960"></p>
</div>
<div class="section level1">
<h1 id="a-little-bit-more">
<i class="fas fa-scroll"></i> A little bit more!<a class="anchor" aria-label="anchor" href="#a-little-bit-more"></a>
</h1>
<!-- inicio font awesome -->
<script src="https://kit.fontawesome.com/1f72d6921a.js" crossorigin="anonymous"></script><blockquote>
<p>At <a href="https://tiagoolivoto.github.io/paper_pliman/code.html" class="external-link">this link</a> you will find more examples on how to use {pliman} to analyze plant images. Source code and images can be downloaded <a href="https://github.com/TiagoOlivoto/paper_pliman/archive/refs/heads/master.zip" class="external-link">here</a>. You can also find a talk (Portuguese language) about {pliman} <a href="https://www.youtube.com/watch?v=ElvUVlPocgA" class="external-link">here</a>. <i class="far fa-lightbulb"></i>Lights, <i class="fas fa-camera"></i>camera, {pliman}!</p>
</blockquote>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
