<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pliman">
<title>Analyzing objects in an image â€¢ pliman</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzing objects in an image">
<meta property="og:description" content="pliman">
<meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a>
    <a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a>
    <a class="dropdown-item" href="../articles/polygons.html">Polygons</a>
    <a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a>
    <a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a>
    <a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Package news</a>
    <a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-more">More</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-more">
    <a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    <a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a>
    <a class="dropdown-item" href="../SUPPORT.html">Support</a>
    <a class="dropdown-item" href="../LICENSE.html">Licence</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2">
    <span class="fab fa fab fa-researchgate fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TiagoOlivoto">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/tolivoto">
    <span class="fab fa fab fa-twitter fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa fab fa-mendeley fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Analyzing objects in an image</h1>
                        <h4 data-toc-skip class="author">Tiago
Olivoto</h4>
            
            <h4 data-toc-skip class="date">2023-01-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/HEAD/vignettes/analyze_objects.Rmd" class="external-link"><code>vignettes/analyze_objects.Rmd</code></a></small>
      <div class="d-none name"><code>analyze_objects.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The function <code><a href="../reference/analyze_objects.html">analyze_objects()</a></code> can be used to count
objects in an image. Let us start with a simple example with the image
<code>object_300dpi.png</code> available on the <a href="https://github.com/TiagoOlivoto/pliman/tree/master/image_examples" class="external-link">GitHub
page</a>. To facilitate the image importation from this folder, a helper
function <code><a href="../reference/utils_image.html">image_pliman()</a></code> is used.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; |==========================================================|</span></span>
<span><span class="co">#&gt; | Tools for Plant Image Analysis (pliman 1.2.0)            |</span></span>
<span><span class="co">#&gt; | Author: Tiago Olivoto                                    |</span></span>
<span><span class="co">#&gt; | Type 'citation('pliman')' to know how to cite pliman     |</span></span>
<span><span class="co">#&gt; | Type 'vignette('pliman_start')' for a short tutorial     |</span></span>
<span><span class="co">#&gt; | Visit 'http://bit.ly/pkg_pliman' for a complete tutorial |</span></span>
<span><span class="co">#&gt; |==========================================================|</span></span>
<span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"objects_300dpi.jpg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-2-1.png" width="960"></p>
<p>The above image was produced with Microsoft PowerPoint. It has a
known resolution of 300 dpi (dots per inch) and shows four objects</p>
<ul>
<li>Larger square: 10 x 10 cm (100 cm<sup>2</sup>)</li>
<li>Smaller square: 5 x 5 cm (25 cm<sup>2</sup>)</li>
<li>Rectangle: 4 x 2 cm (8 cm<sup>2</sup>)</li>
<li>Circle: 3 cm in diameter (~7.08 cm<sup>2</sup>)</li>
</ul>
<p>To count the objects in the image we use
<code><a href="../reference/analyze_objects.html">analyze_objects()</a></code> and inform the image object (the only
mandatory argument). First, we use <code><a href="../reference/image_binary.html">image_binary()</a></code> to see
the most suitable index to segment the objects from the background. By
default, the R, G, B (first row) and their normalized values (second
row) are used.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/image_binary.html">image_binary</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-3-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="analyzing-objects">Analyzing objects<a class="anchor" aria-label="anchor" href="#analyzing-objects"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img_res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">img</span>,</span>
<span>                  marker <span class="op">=</span> <span class="st">"area"</span>,</span>
<span>                  index <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span> <span class="co"># use blue index to segment</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-4-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="adjusting-object-measures">Adjusting object measures<a class="anchor" aria-label="anchor" href="#adjusting-object-measures"></a>
</h2>
<p>The results were stored in <code>img_res</code>. Since there is no
scale declared in the above example, we have no idea about the actual
area of the objects in cm<sup>2</sup>, only in pixels. In this case, we
use <code><a href="../reference/utils_measures.html">get_measures()</a></code> to adjust the measures from pixels to
metric units.</p>
<p>There are two main ways of adjusting the object measures (from pixels
to cm, for example). The first one is to declare the known area,
perimeter, or radius of a given object. The measure for the other
objects will be then computed by a simple rule of three. The second one
is by declaring a known image resolution in dpi (dots per inch). In this
case, the perimeter, area, and radius will be adjusted by the informed
dpi.</p>
<div class="section level3">
<h3 id="declaring-a-known-value">Declaring a known value<a class="anchor" aria-label="anchor" href="#declaring-a-known-value"></a>
</h3>
<p>Since we have known the area of the larger square (object 1), let us
adjust the area of the other objects in the image using that.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">img_res</span>,</span>
<span>             id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>             <span class="va">area</span> <span class="op">~</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; measures corrected with:</span></span>
<span><span class="co">#&gt; object id: 1</span></span>
<span><span class="co">#&gt; area     : 100</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; Total    : 40.002 </span></span>
<span><span class="co">#&gt; Average  : 13.334 </span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt;   id        x        y   area area_ch perimeter radius_mean radius_min</span></span>
<span><span class="co">#&gt; 2  2 1737.502  453.000 25.000  24.915    19.948       2.864      2.492</span></span>
<span><span class="co">#&gt; 3  3 1737.583 1296.320  7.050   7.051    10.085       1.494      1.482</span></span>
<span><span class="co">#&gt; 4  4 1737.504  939.004  7.952   7.902    11.916       1.669      0.989</span></span>
<span><span class="co">#&gt;   radius_max radius_sd diam_mean diam_min diam_max major_axis minor_axis length</span></span>
<span><span class="co">#&gt; 2      3.528     0.314     5.728    4.983    7.056      5.778      5.769  4.996</span></span>
<span><span class="co">#&gt; 3      1.511     0.004     2.988    2.964    3.022      2.998      2.994  3.002</span></span>
<span><span class="co">#&gt; 4      2.227     0.424     3.338    1.977    4.454      4.615      2.298  3.990</span></span>
<span><span class="co">#&gt;   width radius_ratio eccentricity theta solidity convexity elongation</span></span>
<span><span class="co">#&gt; 2 4.987        1.416        0.997 1.571    1.003     0.750      0.002</span></span>
<span><span class="co">#&gt; 3 3.000        1.020        0.984 0.055    1.000     0.908      0.001</span></span>
<span><span class="co">#&gt; 4 1.985        2.253        0.347 0.000    1.006     0.835      0.502</span></span>
<span><span class="co">#&gt;   circularity circularity_haralick circularity_norm coverage   asm   con   cor</span></span>
<span><span class="co">#&gt; 2      15.917                9.113            1.271    0.107 0.913 0.051 0.732</span></span>
<span><span class="co">#&gt; 3      14.428              362.586            1.154    0.030 0.819 0.106 0.822</span></span>
<span><span class="co">#&gt; 4      17.854                3.938            1.430    0.034 0.849 0.083 0.789</span></span>
<span><span class="co">#&gt;     var   idm    sav     sva   sen   ent   dva   den   f12   f13</span></span>
<span><span class="co">#&gt; 2 1.095 0.987 21.900 475.289 0.107 0.116 0.051 0.054 0.518 0.280</span></span>
<span><span class="co">#&gt; 3 1.298 0.972 21.769 465.764 0.213 0.241 0.106 0.100 0.535 0.402</span></span>
<span><span class="co">#&gt; 4 1.197 0.978 21.812 469.379 0.163 0.183 0.083 0.081 0.559 0.364</span></span></code></pre></div>
<p>The same can be used to adjust the measures based on the perimeter or
radius. Let us adjust the perimeter of objects by the perimeter of
object 2 (20 cm).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">img_res</span>,</span>
<span>             id <span class="op">=</span> <span class="fl">2</span>,</span>
<span>             <span class="va">perimeter</span> <span class="op">~</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; measures corrected with:</span></span>
<span><span class="co">#&gt; object id: 2</span></span>
<span><span class="co">#&gt; perimeter     : 20</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; Total    : 62.096 </span></span>
<span><span class="co">#&gt; Average  : 20.699 </span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt;   id        x        y    area area_ch perimeter radius_mean radius_min</span></span>
<span><span class="co">#&gt; 1  1  669.000  798.000 100.524 100.354    40.037       5.748      5.008</span></span>
<span><span class="co">#&gt; 3  3 1737.583 1296.320   7.087   7.088    10.112       1.498      1.486</span></span>
<span><span class="co">#&gt; 4  4 1737.504  939.004   7.994   7.943    11.947       1.673      0.991</span></span>
<span><span class="co">#&gt;   radius_max radius_sd diam_mean diam_min diam_max major_axis minor_axis length</span></span>
<span><span class="co">#&gt; 1      7.078     0.630    11.495   10.016   14.155     11.577     11.577 14.155</span></span>
<span><span class="co">#&gt; 3      1.515     0.004     2.996    2.971    3.030      3.006      3.002  3.010</span></span>
<span><span class="co">#&gt; 4      2.233     0.425     3.347    1.982    4.466      4.627      2.304  4.001</span></span>
<span><span class="co">#&gt;    width radius_ratio eccentricity theta solidity convexity elongation</span></span>
<span><span class="co">#&gt; 1 14.149        1.413        0.999 0.784    1.002     0.750      0.000</span></span>
<span><span class="co">#&gt; 3  3.008        1.020        0.984 0.055    1.000     0.908      0.001</span></span>
<span><span class="co">#&gt; 4  1.990        2.253        0.347 0.000    1.006     0.835      0.502</span></span>
<span><span class="co">#&gt;   circularity circularity_haralick circularity_norm coverage   asm   con   cor</span></span>
<span><span class="co">#&gt; 1      15.946                9.116            1.271    0.427 0.946 0.045 0.722</span></span>
<span><span class="co">#&gt; 3      14.428              362.586            1.154    0.030 0.819 0.106 0.822</span></span>
<span><span class="co">#&gt; 4      17.854                3.938            1.430    0.034 0.849 0.083 0.789</span></span>
<span><span class="co">#&gt;     var   idm    sav     sva   sen   ent   dva   den   f12   f13</span></span>
<span><span class="co">#&gt; 1 1.081 0.994 21.931 478.222 0.069 0.075 0.045 0.029 0.679 0.273</span></span>
<span><span class="co">#&gt; 3 1.298 0.972 21.769 465.764 0.213 0.241 0.106 0.100 0.535 0.402</span></span>
<span><span class="co">#&gt; 4 1.197 0.978 21.812 469.379 0.163 0.183 0.083 0.081 0.559 0.364</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="declaring-the-image-resolution">Declaring the image resolution<a class="anchor" aria-label="anchor" href="#declaring-the-image-resolution"></a>
</h3>
<p>If the image resolution is known, all the measures will be adjusted
according to this resolution. Let us to see a numerical example with
<code><a href="../reference/utils_dpi.html">pixels_to_cm()</a></code>. This function converts the number of pixels
(<span class="math inline">\(px\)</span>) to cm, considering the image
resolution in <span class="math inline">\(dpi\)</span>, as follows:
<span class="math inline">\(cm = px \times (2.54/dpi)\)</span>. Since we
know the number of pixels of the larger square, its perimeter in cm is
given by</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># number of pixels for the highest square perimeter</span></span>
<span><span class="va">ls_px</span> <span class="op">&lt;-</span> <span class="va">img_res</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">perimeter</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/utils_dpi.html">pixels_to_cm</a></span><span class="op">(</span>px <span class="op">=</span> <span class="va">ls_px</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 39.9294</span></span></code></pre></div>
<p>The perimeter of object 1 adjusted by the image resolution is very
close to the true (40 cm). Bellow, the values of all measures are
adjusted by declaring the <code>dpi</code> argument in
<code><a href="../reference/utils_measures.html">get_measures()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">img_res</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id        x        y   area area_ch perimeter radius_mean radius_min</span></span>
<span><span class="co">#&gt; 1  1  669.000  798.000 99.982  99.813    39.929       5.732      4.994</span></span>
<span><span class="co">#&gt; 2  2 1737.502  453.000 24.996  24.911    19.946       2.864      2.491</span></span>
<span><span class="co">#&gt; 3  3 1737.583 1296.320  7.049   7.050    10.085       1.494      1.482</span></span>
<span><span class="co">#&gt; 4  4 1737.504  939.004  7.951   7.900    11.915       1.669      0.988</span></span>
<span><span class="co">#&gt;   radius_max radius_sd diam_mean diam_min diam_max major_axis minor_axis length</span></span>
<span><span class="co">#&gt; 1      7.058     0.629    11.464    9.989   14.117     11.546     11.546 14.117</span></span>
<span><span class="co">#&gt; 2      3.528     0.314     5.728    4.983    7.055      5.778      5.768  4.995</span></span>
<span><span class="co">#&gt; 3      1.511     0.004     2.988    2.963    3.022      2.998      2.994  3.002</span></span>
<span><span class="co">#&gt; 4      2.227     0.424     3.338    1.977    4.453      4.614      2.297  3.990</span></span>
<span><span class="co">#&gt;    width radius_ratio eccentricity theta solidity convexity elongation</span></span>
<span><span class="co">#&gt; 1 14.111        1.413        0.999 0.784    1.002     0.750      0.000</span></span>
<span><span class="co">#&gt; 2  4.987        1.416        0.997 1.571    1.003     0.750      0.002</span></span>
<span><span class="co">#&gt; 3  3.000        1.020        0.984 0.055    1.000     0.908      0.001</span></span>
<span><span class="co">#&gt; 4  1.985        2.253        0.347 0.000    1.006     0.835      0.502</span></span>
<span><span class="co">#&gt;   circularity circularity_haralick circularity_norm coverage   asm   con   cor</span></span>
<span><span class="co">#&gt; 1      15.946                9.116            1.271    0.427 0.946 0.045 0.722</span></span>
<span><span class="co">#&gt; 2      15.917                9.113            1.271    0.107 0.913 0.051 0.732</span></span>
<span><span class="co">#&gt; 3      14.428              362.586            1.154    0.030 0.819 0.106 0.822</span></span>
<span><span class="co">#&gt; 4      17.854                3.938            1.430    0.034 0.849 0.083 0.789</span></span>
<span><span class="co">#&gt;     var   idm    sav     sva   sen   ent   dva   den   f12   f13</span></span>
<span><span class="co">#&gt; 1 1.081 0.994 21.931 478.222 0.069 0.075 0.045 0.029 0.679 0.273</span></span>
<span><span class="co">#&gt; 2 1.095 0.987 21.900 475.289 0.107 0.116 0.051 0.054 0.518 0.280</span></span>
<span><span class="co">#&gt; 3 1.298 0.972 21.769 465.764 0.213 0.241 0.106 0.100 0.535 0.402</span></span>
<span><span class="co">#&gt; 4 1.197 0.978 21.812 469.379 0.163 0.183 0.083 0.081 0.559 0.364</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="counting-crop-grains">Counting crop grains<a class="anchor" aria-label="anchor" href="#counting-crop-grains"></a>
</h2>
<p>Here, we will count the grains in the image
<code>soybean_touch.jpg</code>. This image has a cyan background and
contains 30 soybean grains that touch with each other. Two segmentation
strategies are used. The first one is by using is image segmentation
based on color indexes.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soy</span> <span class="op">&lt;-</span>        <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_touch.jpg"</span><span class="op">)</span></span>
<span><span class="va">grain</span> <span class="op">&lt;-</span>      <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_grain.jpg"</span><span class="op">)</span></span>
<span><span class="va">background</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_back.jpg"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/image_combine.html">image_combine</a></span><span class="op">(</span><span class="va">soy</span>, <span class="va">grain</span>, <span class="va">background</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-9-1.png" width="960"></p>
<p>The function <code><a href="../reference/analyze_objects.html">analyze_objects()</a></code> segment the image using
as default the normalized blue index, as follows <span class="math inline">\(NB = (B/(R+G+B))\)</span>, where <span class="math inline">\(R\)</span>, <span class="math inline">\(G\)</span>, and <span class="math inline">\(B\)</span> are the red, green, and blue bands.
Objects are count and the segmented objects are colored with random
permutations.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">count2</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">soy</span>,</span>
<span>                  index <span class="op">=</span> <span class="st">"NB"</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-10-1.png" width="960"></p>
<p>Users can set <code>show_contour = FALSE</code> to remove the contour
line and identify the objects (in this example the grains) by using the
arguments <code>marker = "id"</code>. The color of the background can
also be changed with <code>col_background</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">count</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">soy</span>,</span>
<span>                  show_contour <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                  show_segmentation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  col_background <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>                  index <span class="op">=</span> <span class="st">"NB"</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-11-1.png" width="960"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the object measures</span></span>
<span><span class="op">(</span><span class="va">measures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_measures.html">get_measures</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id       x       y area area_ch perimeter radius_mean radius_min radius_max</span></span>
<span><span class="co">#&gt; 1   1 245.803 509.791 2275    2302   183.510      26.472     22.936     29.438</span></span>
<span><span class="co">#&gt; 2   2 538.039 401.850 2299    2270   178.196      26.610     24.955     28.703</span></span>
<span><span class="co">#&gt; 3   3 237.650 339.809 2311    2289   181.024      26.699     23.993     29.434</span></span>
<span><span class="co">#&gt; 4   4 345.335 105.757 2443    2413   185.610      27.491     24.340     30.532</span></span>
<span><span class="co">#&gt; 5   5 277.559 260.583 2161    2123   171.711      25.771     24.228     28.046</span></span>
<span><span class="co">#&gt; 6   6 406.963  77.422 2304    2268   178.782      26.623     24.078     30.036</span></span>
<span><span class="co">#&gt; 7   7 301.181 369.957 2212    2206   180.782      26.080     23.483     28.870</span></span>
<span><span class="co">#&gt; 8   8 434.675 553.687 2169    2146   174.539      25.864     23.629     29.068</span></span>
<span><span class="co">#&gt; 9   9 594.703  47.304 2212    2175   176.539      26.109     23.334     29.788</span></span>
<span><span class="co">#&gt; 10 10 469.015  56.456 2316    2283   181.610      26.810     23.160     31.188</span></span>
<span><span class="co">#&gt; 11 11 461.197 155.995 2173    2143   175.267      25.917     23.324     29.863</span></span>
<span><span class="co">#&gt; 12 12 202.009 203.395 2194    2172   177.953      26.056     22.663     30.227</span></span>
<span><span class="co">#&gt; 13 13 192.800 379.576 2208    2185   176.681      26.093     23.560     29.002</span></span>
<span><span class="co">#&gt; 14 14 246.038 221.425 2121    2102   173.853      25.573     21.895     28.910</span></span>
<span><span class="co">#&gt; 15 15 448.377 296.211 2072    2037   171.125      25.230     23.316     27.037</span></span>
<span><span class="co">#&gt; 16 16 250.393 436.911 1961    1929   163.539      24.538     22.737     26.334</span></span>
<span><span class="co">#&gt; 17 17 296.171 186.521 2058    2020   166.782      25.145     22.767     27.242</span></span>
<span><span class="co">#&gt; 18 18 403.438 169.049 2038    2008   168.539      25.020     22.821     27.298</span></span>
<span><span class="co">#&gt; 19 19 550.085 200.504 1932    1897   162.296      24.350     22.487     26.598</span></span>
<span><span class="co">#&gt; 20 20  84.680 206.347 2177    2148   174.782      25.879     22.619     28.800</span></span>
<span><span class="co">#&gt; 21 21 321.983 321.567 1976    1990   178.196      24.619     21.101     27.313</span></span>
<span><span class="co">#&gt; 22 22 242.957 388.558 1924    1940   172.368      24.314     21.962     27.542</span></span>
<span><span class="co">#&gt; 23 23 106.370 432.004 1915    1889   163.711      24.239     22.335     26.245</span></span>
<span><span class="co">#&gt; 24 24 492.960 344.259 1889    1870   163.125      24.072     21.862     26.127</span></span>
<span><span class="co">#&gt; 25 25 721.772 586.265 1910    1876   162.296      24.219     21.774     26.993</span></span>
<span><span class="co">#&gt; 26 26 510.531 158.372 1783    1770   163.024      23.437     21.573     26.558</span></span>
<span><span class="co">#&gt; 27 27 281.047 474.122 1825    1928   179.267      23.575     18.342     27.076</span></span>
<span><span class="co">#&gt; 28 28  92.845 569.427 1746    1713   155.468      23.138     21.048     25.387</span></span>
<span><span class="co">#&gt; 29 29 273.319 547.460 1708    1730   165.125      22.789     18.101     25.637</span></span>
<span><span class="co">#&gt; 30 30 265.270 143.384 1368    1341   137.569      20.384     18.507     22.038</span></span>
<span><span class="co">#&gt;    radius_sd diam_mean diam_min diam_max major_axis minor_axis length  width</span></span>
<span><span class="co">#&gt; 1      1.369    52.943   45.872   58.875     56.136     51.891 56.586 51.583</span></span>
<span><span class="co">#&gt; 2      0.945    53.219   49.910   57.406     56.459     51.876 56.542 52.424</span></span>
<span><span class="co">#&gt; 3      1.240    53.398   47.986   58.869     57.491     51.252 57.201 51.990</span></span>
<span><span class="co">#&gt; 4      1.757    54.982   48.680   61.063     60.932     51.063 61.021 51.024</span></span>
<span><span class="co">#&gt; 5      0.803    51.543   48.456   56.092     54.123     50.894 54.022 50.556</span></span>
<span><span class="co">#&gt; 6      1.664    53.245   48.155   60.071     58.944     49.797 59.502 50.790</span></span>
<span><span class="co">#&gt; 7      1.333    52.160   46.965   57.740     56.351     50.055 56.615 49.892</span></span>
<span><span class="co">#&gt; 8      1.463    51.727   47.259   58.136     56.627     48.810 57.427 49.463</span></span>
<span><span class="co">#&gt; 9      1.847    52.217   46.668   59.576     58.461     48.209 59.167 48.534</span></span>
<span><span class="co">#&gt; 10     2.338    53.619   46.320   62.375     61.186     48.218 61.037 48.694</span></span>
<span><span class="co">#&gt; 11     1.667    51.835   46.647   59.727     57.284     48.349 58.434 48.632</span></span>
<span><span class="co">#&gt; 12     2.031    52.112   45.325   60.453     58.518     47.842 59.063 47.937</span></span>
<span><span class="co">#&gt; 13     1.542    52.186   47.120   58.005     57.485     48.932 57.797 49.403</span></span>
<span><span class="co">#&gt; 14     1.790    51.146   43.789   57.820     56.880     47.574 56.921 48.701</span></span>
<span><span class="co">#&gt; 15     1.004    50.460   46.633   54.074     53.966     48.903 53.265 47.535</span></span>
<span><span class="co">#&gt; 16     0.793    49.076   45.473   52.668     51.590     48.465 51.565 47.982</span></span>
<span><span class="co">#&gt; 17     1.164    50.290   45.535   54.485     54.305     48.274 53.142 47.276</span></span>
<span><span class="co">#&gt; 18     1.157    50.039   45.642   54.596     54.020     48.078 54.116 48.308</span></span>
<span><span class="co">#&gt; 19     0.885    48.701   44.973   53.196     51.854     47.472 52.597 47.711</span></span>
<span><span class="co">#&gt; 20     1.749    51.757   45.238   57.599     57.537     48.220 56.198 47.283</span></span>
<span><span class="co">#&gt; 21     1.546    49.238   42.202   54.625     52.455     48.269 54.100 48.074</span></span>
<span><span class="co">#&gt; 22     1.045    48.628   43.923   55.085     50.535     48.682 51.224 49.964</span></span>
<span><span class="co">#&gt; 23     0.944    48.479   44.671   52.490     51.943     46.960 52.100 47.325</span></span>
<span><span class="co">#&gt; 24     1.145    48.144   43.724   52.254     52.080     46.214 51.243 46.039</span></span>
<span><span class="co">#&gt; 25     1.344    48.438   43.548   53.987     53.070     45.847 53.447 45.691</span></span>
<span><span class="co">#&gt; 26     0.998    46.874   43.146   53.116     48.664     46.904 48.750 47.366</span></span>
<span><span class="co">#&gt; 27     2.414    47.151   36.685   54.152     50.078     47.132 53.604 48.031</span></span>
<span><span class="co">#&gt; 28     1.111    46.276   42.096   50.773     50.216     44.300 50.229 43.910</span></span>
<span><span class="co">#&gt; 29     1.592    45.578   36.202   51.275     49.060     44.733 49.801 45.637</span></span>
<span><span class="co">#&gt; 30     0.824    40.768   37.015   44.075     43.753     39.838 43.549 40.227</span></span>
<span><span class="co">#&gt;    radius_ratio eccentricity  theta solidity convexity elongation circularity</span></span>
<span><span class="co">#&gt; 1         1.283        0.893 -0.889    0.988     0.886      0.088      14.803</span></span>
<span><span class="co">#&gt; 2         1.150        0.853 -0.841    1.013     0.881      0.073      13.812</span></span>
<span><span class="co">#&gt; 3         1.227        0.816 -0.565    1.010     0.911      0.091      14.180</span></span>
<span><span class="co">#&gt; 4         1.254        0.754 -0.993    1.012     0.915      0.164      14.102</span></span>
<span><span class="co">#&gt; 5         1.158        0.896 -0.218    1.018     0.898      0.064      13.644</span></span>
<span><span class="co">#&gt; 6         1.247        0.803  1.134    1.016     0.877      0.146      13.873</span></span>
<span><span class="co">#&gt; 7         1.229        0.832 -1.470    1.003     0.914      0.119      14.775</span></span>
<span><span class="co">#&gt; 8         1.230        0.778  0.952    1.011     0.904      0.139      14.045</span></span>
<span><span class="co">#&gt; 9         1.277        0.751 -1.030    1.017     0.913      0.180      14.090</span></span>
<span><span class="co">#&gt; 10        1.347        0.682  1.296    1.014     0.865      0.202      14.241</span></span>
<span><span class="co">#&gt; 11        1.280        0.752  1.074    1.014     0.902      0.168      14.136</span></span>
<span><span class="co">#&gt; 12        1.334        0.724 -1.114    1.010     0.931      0.188      14.434</span></span>
<span><span class="co">#&gt; 13        1.231        0.777  0.951    1.011     0.908      0.145      14.138</span></span>
<span><span class="co">#&gt; 14        1.320        0.762 -1.294    1.009     0.863      0.144      14.250</span></span>
<span><span class="co">#&gt; 15        1.160        0.853 -1.552    1.017     0.854      0.108      14.133</span></span>
<span><span class="co">#&gt; 16        1.158        0.911 -1.360    1.017     0.883      0.069      13.638</span></span>
<span><span class="co">#&gt; 17        1.197        0.842  1.539    1.019     0.909      0.110      13.516</span></span>
<span><span class="co">#&gt; 18        1.196        0.849 -1.098    1.015     0.914      0.107      13.938</span></span>
<span><span class="co">#&gt; 19        1.183        0.849  0.714    1.018     0.885      0.093      13.634</span></span>
<span><span class="co">#&gt; 20        1.273        0.783  0.011    1.014     0.916      0.159      14.032</span></span>
<span><span class="co">#&gt; 21        1.294        0.837  1.500    0.993     0.841      0.111      16.070</span></span>
<span><span class="co">#&gt; 22        1.254        0.957 -0.891    0.992     0.873      0.025      15.442</span></span>
<span><span class="co">#&gt; 23        1.175        0.853  0.746    1.014     0.904      0.092      13.995</span></span>
<span><span class="co">#&gt; 24        1.195        0.828  1.534    1.010     0.903      0.102      14.087</span></span>
<span><span class="co">#&gt; 25        1.240        0.802  1.318    1.018     0.887      0.145      13.791</span></span>
<span><span class="co">#&gt; 26        1.231        0.970 -1.268    1.007     0.890      0.028      14.906</span></span>
<span><span class="co">#&gt; 27        1.476        0.852  0.074    0.947     0.877      0.104      17.609</span></span>
<span><span class="co">#&gt; 28        1.206        0.818  0.793    1.019     0.906      0.126      13.843</span></span>
<span><span class="co">#&gt; 29        1.416        0.931 -0.583    0.987     0.887      0.084      15.964</span></span>
<span><span class="co">#&gt; 30        1.191        0.894 -0.494    1.020     0.900      0.076      13.834</span></span>
<span><span class="co">#&gt;    circularity_haralick circularity_norm coverage   asm   con   cor    var</span></span>
<span><span class="co">#&gt; 1                19.339            1.221    0.004 0.068 0.527 0.961  7.681</span></span>
<span><span class="co">#&gt; 2                28.149            1.138    0.004 0.089 0.603 0.959  8.373</span></span>
<span><span class="co">#&gt; 3                21.526            1.169    0.004 0.085 0.702 0.950  7.982</span></span>
<span><span class="co">#&gt; 4                15.650            1.161    0.005 0.087 0.730 0.945  7.576</span></span>
<span><span class="co">#&gt; 5                32.103            1.126    0.004 0.086 0.834 0.944  8.461</span></span>
<span><span class="co">#&gt; 6                15.995            1.143    0.004 0.086 0.750 0.951  8.632</span></span>
<span><span class="co">#&gt; 7                19.567            1.220    0.004 0.069 0.783 0.951  9.055</span></span>
<span><span class="co">#&gt; 8                17.679            1.159    0.004 0.081 0.621 0.952  7.448</span></span>
<span><span class="co">#&gt; 9                14.135            1.163    0.004 0.060 0.932 0.926  7.332</span></span>
<span><span class="co">#&gt; 10               11.466            1.174    0.004 0.083 0.834 0.943  8.278</span></span>
<span><span class="co">#&gt; 11               15.551            1.166    0.004 0.092 0.735 0.949  8.245</span></span>
<span><span class="co">#&gt; 12               12.826            1.192    0.004 0.098 0.652 0.946  6.989</span></span>
<span><span class="co">#&gt; 13               16.917            1.166    0.004 0.087 0.720 0.950  8.143</span></span>
<span><span class="co">#&gt; 14               14.287            1.176    0.004 0.085 0.775 0.945  8.084</span></span>
<span><span class="co">#&gt; 15               25.126            1.168    0.004 0.069 0.627 0.955  8.003</span></span>
<span><span class="co">#&gt; 16               30.953            1.127    0.004 0.092 0.668 0.948  7.459</span></span>
<span><span class="co">#&gt; 17               21.601            1.115    0.004 0.109 0.783 0.944  8.011</span></span>
<span><span class="co">#&gt; 18               21.631            1.152    0.004 0.098 0.806 0.938  7.489</span></span>
<span><span class="co">#&gt; 19               27.524            1.127    0.004 0.075 0.670 0.953  8.066</span></span>
<span><span class="co">#&gt; 20               14.796            1.158    0.004 0.096 0.605 0.948  6.862</span></span>
<span><span class="co">#&gt; 21               15.929            1.332    0.004 0.077 0.899 0.951 10.134</span></span>
<span><span class="co">#&gt; 22               23.276            1.280    0.004 0.072 1.210 0.924  8.970</span></span>
<span><span class="co">#&gt; 23               25.681            1.158    0.004 0.091 0.719 0.943  7.276</span></span>
<span><span class="co">#&gt; 24               21.026            1.166    0.004 0.076 0.626 0.945  6.738</span></span>
<span><span class="co">#&gt; 25               18.026            1.141    0.004 0.067 0.610 0.952  7.327</span></span>
<span><span class="co">#&gt; 26               23.473            1.235    0.003 0.071 1.008 0.938  9.137</span></span>
<span><span class="co">#&gt; 27                9.767            1.464    0.003 0.067 1.000 0.945 10.067</span></span>
<span><span class="co">#&gt; 28               20.819            1.147    0.003 0.066 0.648 0.952  7.773</span></span>
<span><span class="co">#&gt; 29               14.311            1.327    0.003 0.063 0.883 0.948  9.524</span></span>
<span><span class="co">#&gt; 30               24.749            1.153    0.003 0.065 0.855 0.931  7.239</span></span>
<span><span class="co">#&gt;      idm    sav      sva   sen   ent   dva   den   f12   f13</span></span>
<span><span class="co">#&gt; 1  0.810 40.475 1565.811 1.237 1.400 0.527 0.347 0.569 0.820</span></span>
<span><span class="co">#&gt; 2  0.807 40.709 1591.123 1.184 1.355 0.603 0.364 0.560 0.807</span></span>
<span><span class="co">#&gt; 3  0.794 40.710 1590.260 1.175 1.358 0.702 0.386 0.535 0.793</span></span>
<span><span class="co">#&gt; 4  0.801 40.638 1582.907 1.175 1.359 0.730 0.385 0.544 0.798</span></span>
<span><span class="co">#&gt; 5  0.795 40.919 1606.437 1.202 1.396 0.834 0.392 0.542 0.804</span></span>
<span><span class="co">#&gt; 6  0.785 42.703 1753.433 1.186 1.378 0.750 0.395 0.528 0.792</span></span>
<span><span class="co">#&gt; 7  0.801 39.534 1497.327 1.247 1.435 0.783 0.387 0.566 0.823</span></span>
<span><span class="co">#&gt; 8  0.798 39.424 1485.771 1.206 1.380 0.621 0.369 0.550 0.806</span></span>
<span><span class="co">#&gt; 9  0.734 40.409 1560.475 1.216 1.470 0.932 0.435 0.445 0.755</span></span>
<span><span class="co">#&gt; 10 0.790 42.460 1731.949 1.184 1.382 0.834 0.397 0.520 0.788</span></span>
<span><span class="co">#&gt; 11 0.803 40.788 1597.759 1.171 1.355 0.735 0.382 0.546 0.799</span></span>
<span><span class="co">#&gt; 12 0.811 41.949 1688.375 1.144 1.309 0.652 0.369 0.554 0.796</span></span>
<span><span class="co">#&gt; 13 0.790 42.627 1743.486 1.206 1.392 0.720 0.386 0.536 0.799</span></span>
<span><span class="co">#&gt; 14 0.789 41.454 1648.110 1.198 1.391 0.775 0.395 0.528 0.794</span></span>
<span><span class="co">#&gt; 15 0.789 40.023 1532.947 1.222 1.404 0.627 0.373 0.540 0.804</span></span>
<span><span class="co">#&gt; 16 0.809 40.529 1575.271 1.158 1.329 0.668 0.372 0.553 0.799</span></span>
<span><span class="co">#&gt; 17 0.785 41.522 1658.845 1.129 1.324 0.783 0.401 0.511 0.773</span></span>
<span><span class="co">#&gt; 18 0.791 41.484 1651.827 1.152 1.348 0.806 0.397 0.518 0.781</span></span>
<span><span class="co">#&gt; 19 0.788 40.989 1609.120 1.220 1.404 0.670 0.381 0.538 0.802</span></span>
<span><span class="co">#&gt; 20 0.804 41.774 1672.857 1.154 1.329 0.605 0.365 0.538 0.790</span></span>
<span><span class="co">#&gt; 21 0.772 39.460 1496.754 1.236 1.449 0.899 0.415 0.518 0.798</span></span>
<span><span class="co">#&gt; 22 0.746 38.571 1425.791 1.220 1.478 1.210 0.459 0.463 0.768</span></span>
<span><span class="co">#&gt; 23 0.788 40.257 1552.140 1.170 1.359 0.719 0.386 0.522 0.786</span></span>
<span><span class="co">#&gt; 24 0.810 39.163 1464.209 1.191 1.363 0.626 0.363 0.550 0.803</span></span>
<span><span class="co">#&gt; 25 0.795 37.981 1375.070 1.234 1.407 0.610 0.369 0.557 0.814</span></span>
<span><span class="co">#&gt; 26 0.742 38.879 1448.188 1.241 1.486 1.008 0.444 0.475 0.777</span></span>
<span><span class="co">#&gt; 27 0.758 39.828 1523.209 1.254 1.487 1.000 0.435 0.502 0.794</span></span>
<span><span class="co">#&gt; 28 0.778 40.417 1561.726 1.234 1.430 0.648 0.381 0.525 0.799</span></span>
<span><span class="co">#&gt; 29 0.759 39.517 1496.381 1.266 1.484 0.883 0.418 0.516 0.802</span></span>
<span><span class="co">#&gt; 30 0.750 39.752 1507.304 1.240 1.471 0.855 0.421 0.480 0.778</span></span></code></pre></div>
<p>In the following example, we will select objects with an area above
the average of all objects by using <code>lower_size = 2057.36</code>.
Additionally, we will use the argument
<code>show_original = FALSE</code> to show the results as colors
(non-original image).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">soy</span>,</span>
<span>                marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                show_original <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                lower_size <span class="op">=</span> <span class="fl">2057.36</span>,</span>
<span>                index <span class="op">=</span> <span class="st">"NB"</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-13-1.png" width="960"></p>
<p>Users can also use the <code>topn_*</code> arguments to select the
top <code>n</code> objects based on either smaller or largest areas.
Letâ€™s see how to point out the 5 grains with the smallest area, showing
the original grains in a blue background. We will also use the argument
<code>index</code> to choose a personalized index to segment the image.
Just for comparison, we will set up explicitly the normalized blue index
by calling <code>index = "B/(R+G+B)"</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">soy</span>,</span>
<span>                marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                topn_lower <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                col_background <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>                index <span class="op">=</span> <span class="st">"B/(R+G+B)"</span><span class="op">)</span> <span class="co"># default</span></span>
<span><span class="co">#&gt; Index 'B/(R+G+B)' is not available. Trying to compute your own index.</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-14-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="using-sample-palettes">Using sample palettes<a class="anchor" aria-label="anchor" href="#using-sample-palettes"></a>
</h2>
<p>Sometimes it is difficult to choose an image index that segments the
image efficiently (even using <code>index</code> ). In
<code>pliman</code> users have an alternative image segmentation
strategy that is using sample color palettes. In this case, users can
say to <code>analyze_objects</code> which color palettes are to be used
for background and foreground. A generalized linear model (binomial
family) is then used to predict the value of each pixel (background or
foreground). Letâ€™s see how the grains of the above image can be counted
with this strategy.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">soy</span>,</span>
<span>                background <span class="op">=</span> <span class="va">background</span>,</span>
<span>                foreground <span class="op">=</span> <span class="va">grain</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/unnamed-chunk-15-1.png" width="960"></p>
<p>Provided that the images are stored in the current working directory
(or subdirectory), users can count the objects with no need to first
import the image into the R environment. In this case, image names need
to be declared as characters. Assuming that soy, background, and grain
are the images saved into the current working directory, the same result
as above is obtained with</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span>img <span class="op">=</span> <span class="st">"soy"</span>,</span>
<span>                background <span class="op">=</span> <span class="st">"background"</span>,</span>
<span>                foreground <span class="op">=</span> <span class="st">"grain"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="leaf-shape">Leaf shape<a class="anchor" aria-label="anchor" href="#leaf-shape"></a>
</h2>
<p>The function <code><a href="../reference/analyze_objects.html">analyze_objects()</a></code> computes a range of
object features that can be used to study leaf shape. As a motivating
example, I will use the image <code>potato_leaves.png</code>, which was
gathered from Gupta et al.Â (2020)<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Gupta, S., Rosenthal, D. M., Stinchcombe, J. R., &amp;amp;
Baucom, R. S. (2020). The remarkable morphological diversity of leaf
shape in sweet potato (&lt;em&gt;Ipomoea batatas&lt;/em&gt;): the influence of
genetics, environment, and GÃ—E. &lt;em&gt;New Phytologist&lt;/em&gt;, 225(5),
2183â€“2195. &lt;a href="https://doi.org/10.1111/nph.16286" class="external-link uri"&gt;https://doi.org/10.1111/nph.16286&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">potato</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"potato_leaves.jpg"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pot_meas</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span><span class="va">potato</span>,</span>
<span>                  watershed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                  show_chull <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># shows the convex hull</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/potato-1.png" width="960"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pot_meas</span><span class="op">$</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id        x        y  area area_ch perimeter radius_mean radius_min</span></span>
<span><span class="co">#&gt; 1  1 854.5474 224.0629 51430   54607  1012.016    131.5497   91.95379</span></span>
<span><span class="co">#&gt; 2  2 197.8351 217.8552 58954   76589  1253.354    140.1864   69.03862</span></span>
<span><span class="co">#&gt; 3  3 536.1969 240.2039 35207   63139  1529.178    110.1025   37.83161</span></span>
<span><span class="co">#&gt;   radius_max radius_sd diam_mean  diam_min diam_max major_axis minor_axis</span></span>
<span><span class="co">#&gt; 1   198.8891  26.16943  263.0995 183.90758 397.7781   305.8445   242.3145</span></span>
<span><span class="co">#&gt; 2   192.3839  28.60992  280.3728 138.07724 384.7677   318.2672   274.2255</span></span>
<span><span class="co">#&gt; 3   188.6550  35.51731  220.2051  75.66323 377.3100   253.8387   243.5342</span></span>
<span><span class="co">#&gt;     length    width radius_ratio eccentricity       theta  solidity convexity</span></span>
<span><span class="co">#&gt; 1 345.9637 254.8631     2.162924    0.6187158  1.39375709 0.9418206 0.9065887</span></span>
<span><span class="co">#&gt; 2 329.8079 331.2327     2.786612    0.7963295 -0.09990644 0.7697450 0.7354356</span></span>
<span><span class="co">#&gt; 3 293.0837 310.0123     4.986702    0.9166288  1.09394717 0.5576110 0.5567300</span></span>
<span><span class="co">#&gt;     elongation circularity circularity_haralick circularity_norm   coverage</span></span>
<span><span class="co">#&gt; 1  0.263324164    19.91400             5.026847         1.598114 0.13395776</span></span>
<span><span class="co">#&gt; 2 -0.004319976    26.64616             4.899922         2.139981 0.15355523</span></span>
<span><span class="co">#&gt; 3 -0.057760358    66.41818             3.099969         5.386599 0.09170233</span></span>
<span><span class="co">#&gt;         asm       con       cor      var       idm      sav      sva       sen</span></span>
<span><span class="co">#&gt; 1 0.1730964 0.2799291 0.9147732 2.642259 0.9062787 23.30290 509.1374 0.8786173</span></span>
<span><span class="co">#&gt; 2 0.2506250 0.2582324 0.8731413 2.017796 0.9046689 24.93465 588.1755 0.7610581</span></span>
<span><span class="co">#&gt; 3 0.3018126 0.4628978 0.8084292 2.208164 0.8917999 23.71801 535.5916 0.6697593</span></span>
<span><span class="co">#&gt;         ent       dva       den       f12       f13</span></span>
<span><span class="co">#&gt; 1 0.9537644 0.2799291 0.2329437 0.6269611 0.7625485</span></span>
<span><span class="co">#&gt; 2 0.8341535 0.2582324 0.2328228 0.5585753 0.6900250</span></span>
<span><span class="co">#&gt; 3 0.7647976 0.4628978 0.2712561 0.4845078 0.6219234</span></span></code></pre></div>
<p>Three key measures (in pixel units) are:</p>
<ol style="list-style-type: decimal">
<li>
<code>area</code> the area of the object.</li>
<li>
<code>area_ch</code> the area of the convex hull.</li>
<li>
<code>perimeter</code> the perimeter of the object.</li>
</ol>
<p>Using these measures, circularity and solidity are computed as shown
in (Gupta et al, 2020).</p>
<p><span class="math display">\[ circularity = 4\pi(area /
perimeter^2)\]</span></p>
<p><span class="math display">\[solidity = area / area\_ch\]</span></p>
<p>Circularity is influenced by serrations and lobing. Solidity is
sensitive to leaves with deep lobes, or with a distinct petiole, and can
be used to distinguish leaves lacking such structures. Unlike
circularity, it is not very sensitive to serrations and minor lobings,
since the convex hull remains largely unaffected.</p>
<div class="section level3">
<h3 id="object-contour">Object contour<a class="anchor" aria-label="anchor" href="#object-contour"></a>
</h3>
<p>Users can also obtain the object contour and convex hull as
follows:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cont</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/utils_objects.html">object_contour</a></span><span class="op">(</span><span class="va">potato</span>,</span>
<span>                 watershed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                 show_image <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">potato</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/utils_polygon_plot.html">plot_contour</a></span><span class="op">(</span><span class="va">cont</span>, col <span class="op">=</span> <span class="st">"red"</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/cont-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="convex-hull">Convex hull<a class="anchor" aria-label="anchor" href="#convex-hull"></a>
</h3>
<p>The function <code><a href="../reference/utils_objects.html">object_contour()</a></code> returns a list with the
coordinate points for each object contour that can be further used to
obtain the convex hull with <code><a href="../reference/utils_polygon.html">conv_hull()</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_polygon.html">conv_hull</a></span><span class="op">(</span><span class="va">cont</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">potato</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/utils_polygon_plot.html">plot_contour</a></span><span class="op">(</span><span class="va">conv</span>, col <span class="op">=</span> <span class="st">"red"</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/conv-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="area-of-the-convex-hull">Area of the convex hull<a class="anchor" aria-label="anchor" href="#area-of-the-convex-hull"></a>
</h3>
<p>Then, the area of the convex hull can be obtained with
<code><a href="../reference/utils_polygon.html">poly_area()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utils_polygon.html">poly_area</a></span><span class="op">(</span><span class="va">conv</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       1       2       3 </span></span>
<span><span class="co">#&gt; 54607.5 76589.5 63139.0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="leaves-as-base-plot">Leaves as base plot<a class="anchor" aria-label="anchor" href="#leaves-as-base-plot"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a data frame for contour and convex hull</span></span>
<span><span class="va">df_cont</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">cont</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">cont</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, object <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cont</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_conv</span> <span class="op">&lt;-</span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">conv</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">conv</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, object <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">conv</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># plot the objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>,<span class="st">"blue"</span>,<span class="st">"green"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">df_cont</span>,</span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">X1</span>, <span class="va">X2</span>, </span>
<span>          cex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>          col <span class="op">=</span> <span class="va">object</span>,</span>
<span>          xlab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>          ylab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>          axes <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df_conv</span>, <span class="va">object</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, </span>
<span>             col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>             border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df_conv</span>, <span class="va">object</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, </span>
<span>             col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>             border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">df_conv</span>, <span class="va">object</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, </span>
<span>             col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>             border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="analyze_objects_files/figure-html/maskpoly-1.png" width="768"></p>
<p>Or do the same with <code>ggplot2</code></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df_cont</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">X1</span>, <span class="va">X2</span>, group <span class="op">=</span> <span class="va">object</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">object</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_conv</span>,</span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, fill <span class="op">=</span> <span class="va">object</span><span class="op">)</span>,</span>
<span>               alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="batch-processing">Batch processing<a class="anchor" aria-label="anchor" href="#batch-processing"></a>
</h2>
<p>In plant image analysis, frequently it is necessary to process more
than one image. For example, in plant breeding, the number of grains per
plant (e.g., wheat) is frequently used in the indirect selection of
high-yielding plants. In <code>pliman</code>, batch processing can be
done when the user declares the argument <code>pattern</code>.</p>
<p>The following example would be used to count the objects in the
images with a pattern name <code>"trat"</code> (e.g.,
<code>"trat1"</code>, <code>"trat2"</code>, <code>"tratn"</code>) saved
into the subfolder â€œ<code>originals"</code> in the current working
directory. The processed images will be saved into the subfolder
<code>"processed"</code>. The object <code>list_res</code> will be a
list with two objects (<code>results</code> and <code>statistics</code>)
for each image.</p>
<p>To speed up the processing time, especially for a large number of
images, the argument <code>parallel = TRUE</code> can be used. In this
case, the images are processed asynchronously (in parallel) in separate
<code>R</code> sessions running in the background on the same machine.
The number of sections is set up to 50% of available cores. This number
can be controlled explicitly with the argument <code>workers</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_res</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/analyze_objects.html">analyze_objects</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"trat"</span>, <span class="co"># matches the name pattern in 'originals' subfolder</span></span>
<span>                  dir_original <span class="op">=</span> <span class="st">"originals"</span>,</span>
<span>                  dir_processed <span class="op">=</span> <span class="st">"processed"</span>,</span>
<span>                  parallel <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># parallel processing</span></span>
<span>                  workers <span class="op">=</span> <span class="fl">8</span>, <span class="co"># 8 multiple sections</span></span>
<span>                  save_image <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-little-bit-more">
<i class="fas fa-scroll"></i> A little bit more!<a class="anchor" aria-label="anchor" href="#a-little-bit-more"></a>
</h2>
<!-- inicio font awesome -->
<script src="https://kit.fontawesome.com/1f72d6921a.js" crossorigin="anonymous"></script><blockquote>
<p>At <a href="https://tiagoolivoto.github.io/paper_pliman/code.html" class="external-link">this
link</a> you will find more examples on how to use {pliman} to analyze
plant images. Source code and images can be downloaded <a href="https://github.com/TiagoOlivoto/paper_pliman/archive/refs/heads/master.zip" class="external-link">here</a>.
You can also find a talk (Portuguese language) about {pliman} <a href="https://www.youtube.com/watch?v=ElvUVlPocgA" class="external-link">here</a>.
<i class="far fa-lightbulb"></i>Lights,
<i class="fas fa-camera"></i>camera, {pliman}!</p>
</blockquote>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
