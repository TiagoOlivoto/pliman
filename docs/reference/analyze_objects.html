<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Analyzes objects in an image — analyze_objects • pliman</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Analyzes objects in an image — analyze_objects" />
<meta property="og:description" content="

analyze_objects() provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at Details section.
plot.anal_obj() Produces an histogram for the R, G, and B values when
argument object_index is used in the function analyze_objects().

" />
<meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pliman</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/manipulation.html">Image manipulation</a>
    </li>
    <li>
      <a href="../articles/segmentation.html">Image segmentation</a>
    </li>
    <li>
      <a href="../articles/analyze_objects.html">Analyze objects in an image</a>
    </li>
    <li>
      <a href="../articles/leaf_area.html">Measure leaf area</a>
    </li>
    <li>
      <a href="../articles/phytopatometry.html">Phytopatometry</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    </li>
    <li>
      <a href="../CONTRIBUTING.html">Contributing</a>
    </li>
    <li>
      <a href="../ISSUE_TEMPLATE.html">Issues</a>
    </li>
    <li>
      <a href="../SUPPORT.html">Support</a>
    </li>
    <li>
      <a href="../LICENSE.html">Licence</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.researchgate.net/profile/Tiago_Olivoto2">RG</a>
</li>
<li>
  <a href="https://github.com/TiagoOlivoto">
    <span class="fab fab-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/tolivoto">
    <span class="fab fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa-mendeley"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analyzes objects in an image</h1>
    <small class="dont-index">Source: <a href='https://github.com/TiagoOlivoto/pliman/blob/master/R/analyze_objects.R'><code>R/analyze_objects.R</code></a></small>
    <div class="hidden name"><code>analyze_objects.Rd</code></div>
    </div>

    <div class="ref-description">
    
<ul>
<li><p><code>analyze_objects()</code> provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at <strong>Details</strong> section.</p></li>
<li><p><code>plot.anal_obj()</code> Produces an histogram for the R, G, and B values when
argument <code>object_index</code> is used in the function <code>analyze_objects()</code>.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>analyze_objects</span><span class='op'>(</span>
  <span class='va'>img</span>,
  foreground <span class='op'>=</span> <span class='cn'>NULL</span>,
  background <span class='op'>=</span> <span class='cn'>NULL</span>,
  pattern <span class='op'>=</span> <span class='cn'>NULL</span>,
  img_pattern <span class='op'>=</span> <span class='cn'>NULL</span>,
  parallel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  workers <span class='op'>=</span> <span class='cn'>NULL</span>,
  watershed <span class='op'>=</span> <span class='cn'>TRUE</span>,
  resize <span class='op'>=</span> <span class='cn'>FALSE</span>,
  trim <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fill_hull <span class='op'>=</span> <span class='cn'>FALSE</span>,
  filter <span class='op'>=</span> <span class='cn'>FALSE</span>,
  invert <span class='op'>=</span> <span class='cn'>FALSE</span>,
  object_size <span class='op'>=</span> <span class='st'>"medium"</span>,
  index <span class='op'>=</span> <span class='st'>"NB"</span>,
  my_index <span class='op'>=</span> <span class='cn'>NULL</span>,
  object_index <span class='op'>=</span> <span class='cn'>NULL</span>,
  threshold <span class='op'>=</span> <span class='st'>"Otsu"</span>,
  tolerance <span class='op'>=</span> <span class='cn'>NULL</span>,
  extension <span class='op'>=</span> <span class='cn'>NULL</span>,
  lower_size <span class='op'>=</span> <span class='cn'>NULL</span>,
  upper_size <span class='op'>=</span> <span class='cn'>NULL</span>,
  topn_lower <span class='op'>=</span> <span class='cn'>NULL</span>,
  topn_upper <span class='op'>=</span> <span class='cn'>NULL</span>,
  lower_eccent <span class='op'>=</span> <span class='cn'>NULL</span>,
  upper_eccent <span class='op'>=</span> <span class='cn'>NULL</span>,
  randomize <span class='op'>=</span> <span class='cn'>TRUE</span>,
  nrows <span class='op'>=</span> <span class='fl'>2000</span>,
  show_image <span class='op'>=</span> <span class='cn'>TRUE</span>,
  show_original <span class='op'>=</span> <span class='cn'>TRUE</span>,
  show_chull <span class='op'>=</span> <span class='cn'>FALSE</span>,
  show_contour <span class='op'>=</span> <span class='cn'>TRUE</span>,
  contour_col <span class='op'>=</span> <span class='st'>"red"</span>,
  contour_size <span class='op'>=</span> <span class='fl'>1</span>,
  show_background <span class='op'>=</span> <span class='cn'>TRUE</span>,
  show_segmentation <span class='op'>=</span> <span class='cn'>FALSE</span>,
  col_foreground <span class='op'>=</span> <span class='cn'>NULL</span>,
  col_background <span class='op'>=</span> <span class='cn'>NULL</span>,
  marker <span class='op'>=</span> <span class='cn'>FALSE</span>,
  marker_col <span class='op'>=</span> <span class='cn'>NULL</span>,
  marker_size <span class='op'>=</span> <span class='cn'>NULL</span>,
  save_image <span class='op'>=</span> <span class='cn'>FALSE</span>,
  prefix <span class='op'>=</span> <span class='st'>"proc_"</span>,
  dir_original <span class='op'>=</span> <span class='cn'>NULL</span>,
  dir_processed <span class='op'>=</span> <span class='cn'>NULL</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='co'># S3 method for anal_obj</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>img</th>
      <td><p>The image to be analyzed.</p></td>
    </tr>
    <tr>
      <th>foreground</th>
      <td><p>A color palette of the foreground (optional).</p></td>
    </tr>
    <tr>
      <th>background</th>
      <td><p>A color palette of the background (optional).</p></td>
    </tr>
    <tr>
      <th>pattern</th>
      <td><p>A pattern of file name used to identify images to be imported.
For example, if <code>pattern = "im"</code> all images in the current working
directory that the name matches the pattern (e.g., img1.-, image1.-, im2.-)
will be imported as a list. Providing any number as pattern (e.g., <code>pattern = "1"</code>) will select images that are named as 1.-, 2.-, and so on. An error
will be returned if the pattern matches any file that is not supported
(e.g., img1.pdf).</p></td>
    </tr>
    <tr>
      <th>img_pattern</th>
      <td><p>Deprecated. Use <code>pattern</code> instead.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>If <code>TRUE</code> processes the images asynchronously (in parallel)
in separate R sessions running in the background on the same machine. It
may speed up the processing time, especially when <code>pattern</code> is used is
informed. When <code>object_index</code> is informed, multiple sections will be used
to extract the RGB values for each object in the image. This may
significantly speed up processing time when an image has lots of objects
(say &gt;1000).</p></td>
    </tr>
    <tr>
      <th>workers</th>
      <td><p>A positive numeric scalar or a function specifying the number
of parallel processes that can be active at the same time. By default, the
number of sections is set up to 50% of available cores.</p></td>
    </tr>
    <tr>
      <th>watershed</th>
      <td><p>If <code>TRUE</code> (default) performs watershed-based object
detection. This will detect objects even when they are touching one other.
If <code>FALSE</code>, all pixels for each connected set of foreground pixels are set
to a unique object. This is faster but is not able to segment touching
objects.</p></td>
    </tr>
    <tr>
      <th>resize</th>
      <td><p>Resize the image before processing? Defaults to <code>FALSE</code>. Use a
numeric value of range 0-100 (proportion of the size of the original
image).</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>Number of pixels removed from edges in the analysis. The edges of
images are often shaded, which can affect image analysis. The edges of
images can be removed by specifying the number of pixels. Defaults to
<code>FALSE</code> (no trimmed edges).</p></td>
    </tr>
    <tr>
      <th>fill_hull</th>
      <td><p>Fill holes in the binary image? Defaults to <code>FALSE</code>. This is
useful to fill holes in objects that have portions with a color similar to
the background. IMPORTANT: Objects touching each other can be combined into
one single object, which may underestimate the number of objects in an
image.</p></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>Performs median filtering after image processing? defaults to
<code>FALSE</code>. See more at <code><a href='utils_transform.html'>image_filter()</a></code>.</p></td>
    </tr>
    <tr>
      <th>invert</th>
      <td><p>Inverts the binary image, if desired. This is useful to process
images with black background. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>object_size</th>
      <td><p>The size of the object. Used to automatically set up
<code>tolerance</code> and <code>extension</code> parameters. One of the following. <code>"small"</code>
(e.g, wheat grains), <code>"medium"</code> (e.g, soybean grains), <code>"large"</code>(e.g,
peanut grains), and <code>"elarge"</code> (e.g, soybean pods)`.</p></td>
    </tr>
    <tr>
      <th>index, my_index</th>
      <td><p>A character value specifying the target mode for
conversion to binary image when <code>foreground</code> and <code>background</code> are not
declared. Defaults to <code>"NB"</code> (normalized blue). See <code><a href='image_index.html'>image_index()</a></code> for
more details.</p></td>
    </tr>
    <tr>
      <th>object_index</th>
      <td><p>Defaults to <code>FALSE</code>. If an index is informed, the average
value for each object is returned. It can be the R, G, and B values or any
operation involving them, e.g., <code>object_index = "R/B"</code> will return, for
each object in the image, the average value of the R/B ratio.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>A numeric value for the segmentation threshold.  By default,
a threshold value based on Otsu's method is used to reduce the grayscale
image to a binary image.</p></td>
    </tr>
    <tr>
      <th>tolerance</th>
      <td><p>The minimum height of the object in the units of image
intensity between its highest point (seed) and the point where it contacts
another object (checked for every contact pixel). If the height is smaller
than the tolerance, the object will be combined with one of its neighbors,
which is the highest.</p></td>
    </tr>
    <tr>
      <th>extension</th>
      <td><p>Radius of the neighborhood in pixels for the detection of
neighboring objects. Higher value smooths out small objects.</p></td>
    </tr>
    <tr>
      <th>lower_size, upper_size</th>
      <td><p>Lower and upper limits for size for the image
analysis. Plant images often contain dirt and dust. To prevent dust from
affecting the image analysis, objects with lesser than 10% of the mean of
all objects are removed. Upper limit is set to <code>NULL</code>, i.e., no upper
limit used. One can set a known area or use <code>lower_limit = 0</code> to select all
objects (not advised). Objects that matches the size of a given range of
sizes can be selected by setting up the two arguments. For example, if
<code>lower_size = 120</code> and <code>upper_size = 140</code>, objects with size greater than
or equal 120 and less than or equal 140 will be considered.</p></td>
    </tr>
    <tr>
      <th>topn_lower, topn_upper</th>
      <td><p>Select the top <code>n</code> objects based on its area.
<code>topn_lower</code> selects the <code>n</code> elements with the smallest area whereas
<code>topn_upper</code> selects the <code>n</code> objects with the largest area.</p></td>
    </tr>
    <tr>
      <th>lower_eccent, upper_eccent</th>
      <td><p>Lower and upper limit for object
eccentricity for the image analysis. Users may use these arguments to
remove objects such as square papers for scale (low eccentricity) or cut
petioles (high eccentricity) from the images. Defaults to <code>NULL</code> (i.e., no
lower and upper limits).</p></td>
    </tr>
    <tr>
      <th>randomize</th>
      <td><p>Randomize the lines before training the model?</p></td>
    </tr>
    <tr>
      <th>nrows</th>
      <td><p>The number of lines to be used in training step. Defaults to
2000.</p></td>
    </tr>
    <tr>
      <th>show_image</th>
      <td><p>Show image after processing?</p></td>
    </tr>
    <tr>
      <th>show_original</th>
      <td><p>Show the count objects in the original image?</p></td>
    </tr>
    <tr>
      <th>show_chull</th>
      <td><p>Show the convex hull around the objects? Defaults to
<code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>show_contour</th>
      <td><p>Show a contour line around the objects? Defaults
to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>contour_col, contour_size</th>
      <td><p>The color and size for the contour line
around objects. Defaults to <code>contour_col = "red"</code> and <code>contour_size = 1</code>.</p></td>
    </tr>
    <tr>
      <th>show_background</th>
      <td><p>Show the background? Defaults to <code>TRUE</code>. A white
background is shown by default when <code>show_original = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>show_segmentation</th>
      <td><p>Shows the object segmentation colored with random
permutations. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>col_foreground, col_background</th>
      <td><p>Foreground and background color after
image processing. Defaults to <code>NULL</code>, in which <code>"black"</code>, and <code>"white"</code> are
used, respectively.</p></td>
    </tr>
    <tr>
      <th>marker, marker_col, marker_size</th>
      <td><p>The type, color and size of the object
marker. Defaults to <code>NULL</code>, which plots the object id. Use <code>marker = "point"</code> to show a point in each object or <code>marker = FALSE</code> to omit object
marker.</p></td>
    </tr>
    <tr>
      <th>save_image</th>
      <td><p>Save the image after processing? The image is saved in the
current working directory named as <code>proc_*</code> where <code><a href='https://rdrr.io/r/base/Arithmetic.html'>*</a></code> is the image name
given in <code>img</code>.</p></td>
    </tr>
    <tr>
      <th>prefix</th>
      <td><p>The prefix to be included in the processed images. Defaults to
<code>"proc_"</code>.</p></td>
    </tr>
    <tr>
      <th>dir_original, dir_processed</th>
      <td><p>The directory containing the original and
processed images. Defaults to <code>NULL</code>. In this case, the function will
search for the image <code>img</code> in the current working directory. After
processing, when <code>save_image = TRUE</code>, the processed image will be also
saved in such a directory.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>If <code>TRUE</code> (default) a summary is shown in the console.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>An object of class <code>anal_obj</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently not used</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>analyze_objects()</code> returns a list with the following objects:</p><ul>
<li><p><code>results</code> A data frame with the following variables for each object in the
image:</p><ul>
<li><p><code>id</code>  object identification.</p></li>
<li><p><code>x</code>,<code>y</code>,  x and y coordinates for the center of mass of the object.</p></li>
<li><p><code>area</code>:  area of the object (in pixels).</p></li>
<li><p><code>area_ch</code>:  the area of the convex hull around object (in pixels).</p></li>
<li><p><code>perimeter</code>: perimeter (in pixels).</p></li>
<li><p><code>radius_min</code>, <code>radius_mean</code>, and <code>radius_max</code>: The minimum, mean, and
maximum radius (in pixels), respectively.</p></li>
<li><p><code>radius_sd</code>: standard deviation of the mean radius (in pixels).</p></li>
<li><p><code>radius_ratio</code>: radius ratio given by <code>radius_max / radius_min</code>.</p></li>
<li><p><code>major_axis</code>: elliptical fit major axis (in pixels).</p></li>
<li><p><code>eccentricity</code>: elliptical eccentricity defined by
sqrt(1-minoraxis^2/majoraxis^2). Circle eccentricity is 0 and straight
line eccentricity is 1.</p></li>
<li><p><code>theta</code>: object angle (in radians).</p></li>
<li><p><code>solidity</code>: object solidity given by <code>area / area_ch</code>.</p></li>
<li><p><code>circularity</code>: the object circularity given by \(4\*pi\*(area / perimeter^2)\).</p></li>
<li><p><code>index</code>: (when <code>object_index</code> is declared) the index for pixel
intensity of each object. By default, the mean value of B (blue).</p></li>
</ul></li>
<li><p><code>statistics</code>: A data frame with the summary statistics for the area of the
objects.</p></li>
<li><p><code>count</code>: If <code>pattern</code> is used, shows the number of objects in each image.</p></li>
<li><p><code>object_rgb</code>: If <code>object_index</code> is used, returns the R, G, and B values
for each pixel of each object.</p></li>
</ul>

<p><code>plot.anal_obj()</code> returns a <code>trellis</code> object containing the
distribution of the pixels for each object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A binary image is first generated to segment the foreground and background.
The argument <code>index</code> is useful to choose a proper index to segment the image
(see <code><a href='image_binary.html'>image_binary()</a></code> for more details). Then, the number of objects in the
foreground is counted. By setting up arguments such as <code>lower_size</code>,
<code>upper_size</code> it is possible to set a threshold for lower and upper sizes of
the objects, respectively. The argument <code>object_size</code> can be used to set up
pre-defined values of <code>tolerance</code> and <code>extension</code> depending on the image
resolution. This will influence the watershed-based object segmentation. Users
can also tune-up <code>tolerance</code> and <code>extension</code> explicitly to a better precision
of watershed segmentation.</p>
<p>If <code>watershed = FALSE</code> is used,</p>
<p>If color palettes samples are provided, a general
linear model (binomial family) fitted to the RGB values is used to segment
fore- and background.</p>
<p>By using <code>pattern</code> it is possible to process several images with common
pattern names that are stored in the current working directory or in the
subdirectory informed in <code>dir_original</code>'. To speed up the computation time,
one can set <code>parallel = TRUE</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Gupta, S., Rosenthal, D. M., Stinchcombe, J. R., &amp; Baucom, R. S. (2020). The
remarkable morphological diversity of leaf shape in sweet potato (Ipomoea
batatas): the influence of genetics, environment, and G×E. New Phytologist,
225(5), 2183–2195. doi: <a href='https://doi.org/10.1111/NPH.16286'>10.1111/NPH.16286</a></p>
<p>Lee, Y., &amp; Lim, W. (2017). Shoelace Formula: Connecting the Area of a Polygon
and the Vector Cross Product. The Mathematics Teacher, 110(8), 631–636.
doi: <a href='https://doi.org/10.5951/MATHTEACHER.110.8.0631'>10.5951/MATHTEACHER.110.8.0631</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Tiago Olivoto <a href='mailto:tiagoolivoto@gmail.com'>tiagoolivoto@gmail.com</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/TiagoOlivoto/pliman'>pliman</a></span><span class='op'>)</span>
<span class='va'>img</span> <span class='op'>&lt;-</span> <span class='fu'><a href='utils_image.html'>image_pliman</a></span><span class='op'>(</span><span class='st'>"soybean_touch.jpg"</span><span class='op'>)</span>
<span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='fu'>analyze_objects</span><span class='op'>(</span><span class='va'>img</span><span class='op'>)</span>
</div><div class='img'><img src='analyze_objects-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='va'>obj</span><span class='op'>$</span><span class='va'>statistics</span>
</div><div class='output co'>#&gt;        stat      value
#&gt; 1         n    30.0000
#&gt; 2  min_area  1366.0000
#&gt; 3 mean_area  2057.3667
#&gt; 4  max_area  2445.0000
#&gt; 5   sd_area   230.5574
#&gt; 6  sum_area 61721.0000</div><div class='input'>
<span class='co'># Enumerate the objects in the original image</span>
<span class='co'># Return the top-5 grains with the largest area</span>

<span class='va'>top</span> <span class='op'>&lt;-</span>
 <span class='fu'>analyze_objects</span><span class='op'>(</span><span class='va'>img</span>,
                 marker <span class='op'>=</span> <span class='st'>"id"</span>,
                 topn_upper <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
</div><div class='img'><img src='analyze_objects-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='va'>top</span><span class='op'>$</span><span class='va'>results</span>
</div><div class='output co'>#&gt;    id        x         y area area_ch perimeter radius_mean radius_min
#&gt; 4   4 345.3566 105.78323 2445    2406       158    27.51343   24.68250
#&gt; 11 11 468.9970  56.42549 2315    2275       155    26.76542   23.03064
#&gt; 3   3 237.5917 339.82483 2312    2282       152    26.69878   23.96521
#&gt; 5   5 406.9314  77.54909 2302    2264       153    26.64891   23.96546
#&gt; 2   2 538.0561 401.89604 2299    2258       153    26.60716   24.95688
#&gt;    radius_max radius_sd radius_ratio major_axis eccentricity      theta
#&gt; 4    30.47116 1.7303597     1.234525   60.92191    0.5443558 -0.9908157
#&gt; 11   30.78003 2.3489729     1.336482   61.22955    0.6175840  1.2923197
#&gt; 3    29.04402 1.2334610     1.211924   57.50966    0.4538087 -0.5715211
#&gt; 5    29.63586 1.6395963     1.236607   58.85962    0.5325370  1.1444750
#&gt; 2    28.40020 0.9346592     1.137971   56.60376    0.4058277 -0.8382015
#&gt;    solidity circularity
#&gt; 4  1.016209    1.230763
#&gt; 11 1.017582    1.210870
#&gt; 3  1.013146    1.257507
#&gt; 5  1.016784    1.235755
#&gt; 2  1.018158    1.234144</div><div class='input'><span class='co'># }</span>

<span class='co'># \donttest{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/TiagoOlivoto/pliman'>pliman</a></span><span class='op'>)</span>

<span class='va'>img</span> <span class='op'>&lt;-</span> <span class='fu'><a href='utils_image.html'>image_pliman</a></span><span class='op'>(</span><span class='st'>"soy_green.jpg"</span><span class='op'>)</span>
<span class='co'># Segment the foreground (grains) using the normalized blue index</span>
<span class='co'># Shows the average value of the blue index in each object</span>

<span class='va'>rgb</span> <span class='op'>&lt;-</span>
   <span class='fu'>analyze_objects</span><span class='op'>(</span><span class='va'>img</span>,
                   index <span class='op'>=</span> <span class='st'>"NB"</span>, <span class='co'># default</span>
                   object_index <span class='op'>=</span> <span class='st'>"B"</span><span class='op'>)</span>
</div><div class='img'><img src='analyze_objects-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>rgb</span><span class='op'>)</span>
</div><div class='img'><img src='analyze_objects-4.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://olivoto.netlify.app/'>Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


