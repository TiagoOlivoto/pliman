<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="

analyze_objects() provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at Details section.
analyze_objects_iter() provides an iterative section to measure object
features using an object with a known area.
plot.anal_obj() Produces an histogram for the R, G, and B values when
argument object_index is used in the function analyze_objects().

"><title>Analyzes objects in an image — analyze_objects • pliman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzes objects in an image — analyze_objects"><meta property="og:description" content="

analyze_objects() provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at Details section.
analyze_objects_iter() provides an iterative section to measure object
features using an object with a known area.
plot.anal_obj() Produces an histogram for the R, G, and B values when
argument object_index is used in the function analyze_objects().

"><meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a>
    <a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a>
    <a class="dropdown-item" href="../articles/polygons.html">Polygons</a>
    <a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a>
    <a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a>
    <a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Package news</a>
    <a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-more">More</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-more">
    <a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    <a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a>
    <a class="dropdown-item" href="../SUPPORT.html">Support</a>
    <a class="dropdown-item" href="../LICENSE.html">Licence</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2">
    <span class="fab fa fab fa-researchgate fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TiagoOlivoto">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/tolivoto">
    <span class="fab fa fab fa-twitter fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa fab fa-mendeley fa-2x"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Analyzes objects in an image</h1>
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/HEAD/R/analyze_objects.R" class="external-link"><code>R/analyze_objects.R</code></a></small>
      <div class="d-none name"><code>analyze_objects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    
<ul><li><p><code>analyze_objects()</code> provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at <strong>Details</strong> section.</p></li>
<li><p><code>analyze_objects_iter()</code> provides an iterative section to measure object
features using an object with a known area.</p></li>
<li><p><code>plot.anal_obj()</code> Produces an histogram for the R, G, and B values when
argument <code>object_index</code> is used in the function <code>analyze_objects()</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">analyze_objects</span><span class="op">(</span>
  <span class="va">img</span>,
  foreground <span class="op">=</span> <span class="cn">NULL</span>,
  background <span class="op">=</span> <span class="cn">NULL</span>,
  reference <span class="op">=</span> <span class="cn">NULL</span>,
  reference_area <span class="op">=</span> <span class="cn">NULL</span>,
  pattern <span class="op">=</span> <span class="cn">NULL</span>,
  parallel <span class="op">=</span> <span class="cn">FALSE</span>,
  workers <span class="op">=</span> <span class="cn">NULL</span>,
  watershed <span class="op">=</span> <span class="cn">TRUE</span>,
  har_nbins <span class="op">=</span> <span class="fl">32</span>,
  har_scales <span class="op">=</span> <span class="fl">1</span>,
  har_band <span class="op">=</span> <span class="fl">1</span>,
  resize <span class="op">=</span> <span class="cn">FALSE</span>,
  trim <span class="op">=</span> <span class="cn">FALSE</span>,
  fill_hull <span class="op">=</span> <span class="cn">FALSE</span>,
  filter <span class="op">=</span> <span class="cn">FALSE</span>,
  invert <span class="op">=</span> <span class="cn">FALSE</span>,
  object_size <span class="op">=</span> <span class="st">"medium"</span>,
  index <span class="op">=</span> <span class="st">"NB"</span>,
  my_index <span class="op">=</span> <span class="cn">NULL</span>,
  object_index <span class="op">=</span> <span class="cn">NULL</span>,
  threshold <span class="op">=</span> <span class="st">"Otsu"</span>,
  tolerance <span class="op">=</span> <span class="cn">NULL</span>,
  extension <span class="op">=</span> <span class="cn">NULL</span>,
  lower_size <span class="op">=</span> <span class="cn">NULL</span>,
  upper_size <span class="op">=</span> <span class="cn">NULL</span>,
  topn_lower <span class="op">=</span> <span class="cn">NULL</span>,
  topn_upper <span class="op">=</span> <span class="cn">NULL</span>,
  lower_eccent <span class="op">=</span> <span class="cn">NULL</span>,
  upper_eccent <span class="op">=</span> <span class="cn">NULL</span>,
  lower_circ <span class="op">=</span> <span class="cn">NULL</span>,
  upper_circ <span class="op">=</span> <span class="cn">NULL</span>,
  randomize <span class="op">=</span> <span class="cn">TRUE</span>,
  nrows <span class="op">=</span> <span class="fl">2000</span>,
  show_image <span class="op">=</span> <span class="cn">TRUE</span>,
  show_original <span class="op">=</span> <span class="cn">TRUE</span>,
  show_chull <span class="op">=</span> <span class="cn">FALSE</span>,
  show_contour <span class="op">=</span> <span class="cn">TRUE</span>,
  contour_col <span class="op">=</span> <span class="st">"red"</span>,
  contour_size <span class="op">=</span> <span class="fl">1</span>,
  show_background <span class="op">=</span> <span class="cn">TRUE</span>,
  show_segmentation <span class="op">=</span> <span class="cn">FALSE</span>,
  col_foreground <span class="op">=</span> <span class="cn">NULL</span>,
  col_background <span class="op">=</span> <span class="cn">NULL</span>,
  marker <span class="op">=</span> <span class="cn">FALSE</span>,
  marker_col <span class="op">=</span> <span class="cn">NULL</span>,
  marker_size <span class="op">=</span> <span class="cn">NULL</span>,
  save_image <span class="op">=</span> <span class="cn">FALSE</span>,
  prefix <span class="op">=</span> <span class="st">"proc_"</span>,
  dir_original <span class="op">=</span> <span class="cn">NULL</span>,
  dir_processed <span class="op">=</span> <span class="cn">NULL</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># S3 method for anal_obj</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>
  <span class="va">x</span>,
  which <span class="op">=</span> <span class="st">"measure"</span>,
  measure <span class="op">=</span> <span class="st">"area"</span>,
  type <span class="op">=</span> <span class="st">"density"</span>,
  facet <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">analyze_objects_iter</span><span class="op">(</span><span class="va">pattern</span>, <span class="va">known_area</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>img</dt>
<dd><p>The image to be analyzed.</p></dd>
<dt>foreground</dt>
<dd><p>A color palette of the foreground (optional).</p></dd>
<dt>background</dt>
<dd><p>A color palette of the background (optional).</p></dd>
<dt>reference</dt>
<dd><p>A color palette for a reference object (optional). This is
useful to adjust measures when images are not obtained with standard
resolution (e.g., field images). See more in the details section.</p></dd>
<dt>reference_area</dt>
<dd><p>The known area of the reference objects. The measures
of all the objects in the image will be corrected using the same unit of
the area informed here.</p></dd>
<dt>pattern</dt>
<dd><p>A pattern of file name used to identify images to be imported.
For example, if <code>pattern = "im"</code> all images in the current working
directory that the name matches the pattern (e.g., img1.-, image1.-, im2.-)
will be imported as a list. Providing any number as pattern (e.g., <code>pattern = "1"</code>) will select images that are named as 1.-, 2.-, and so on. An error
will be returned if the pattern matches any file that is not supported
(e.g., img1.pdf).</p></dd>
<dt>parallel</dt>
<dd><p>If <code>TRUE</code> processes the images asynchronously (in parallel)
in separate R sessions running in the background on the same machine. It
may speed up the processing time, especially when <code>pattern</code> is used is
informed. When <code>object_index</code> is informed, multiple sections will be used
to extract the RGB values for each object in the image. This may
significantly speed up processing time when an image has lots of objects
(say &gt;1000).</p></dd>
<dt>workers</dt>
<dd><p>A positive numeric scalar or a function specifying the number
of parallel processes that can be active at the same time. By default, the
number of sections is set up to 50% of available cores.</p></dd>
<dt>watershed</dt>
<dd><p>If <code>TRUE</code> (default) performs watershed-based object
detection. This will detect objects even when they are touching one other.
If <code>FALSE</code>, all pixels for each connected set of foreground pixels are set
to a unique object. This is faster but is not able to segment touching
objects.</p></dd>
<dt>har_nbins</dt>
<dd><p>An integer indicating the number of bins using to compute
the Haralick matrix. Defaults to 32. See Details</p></dd>
<dt>har_scales</dt>
<dd><p>A integer vector indicating the number of scales to use to
compute the Haralick features. See Details.</p></dd>
<dt>har_band</dt>
<dd><p>The band to compute the Haralick features (1 = R, 2 = G, 3 =
B). Defaults to 1.</p></dd>
<dt>resize</dt>
<dd><p>Resize the image before processing? Defaults to <code>FALSE</code>. Use a
numeric value of range 0-100 (proportion of the size of the original
image).</p></dd>
<dt>trim</dt>
<dd><p>Number of pixels removed from edges in the analysis. The edges of
images are often shaded, which can affect image analysis. The edges of
images can be removed by specifying the number of pixels. Defaults to
<code>FALSE</code> (no trimmed edges).</p></dd>
<dt>fill_hull</dt>
<dd><p>Fill holes in the binary image? Defaults to <code>FALSE</code>. This is
useful to fill holes in objects that have portions with a color similar to
the background. IMPORTANT: Objects touching each other can be combined into
one single object, which may underestimate the number of objects in an
image.</p></dd>
<dt>filter</dt>
<dd><p>Performs median filtering after image processing? defaults to
<code>FALSE</code>. See more at <code><a href="utils_transform.html">image_filter()</a></code>.</p></dd>
<dt>invert</dt>
<dd><p>Inverts the binary image, if desired. This is useful to process
images with black background. Defaults to <code>FALSE</code>.</p></dd>
<dt>object_size</dt>
<dd><p>The size of the object. Used to automatically set up
<code>tolerance</code> and <code>extension</code> parameters. One of the following. <code>"small"</code>
(e.g, wheat grains), <code>"medium"</code> (e.g, soybean grains), <code>"large"</code>(e.g,
peanut grains), and <code>"elarge"</code> (e.g, soybean pods)`.</p></dd>
<dt>index, my_index</dt>
<dd><p>A character value specifying the target mode for
conversion to binary image when <code>foreground</code> and <code>background</code> are not
declared. Defaults to <code>"NB"</code> (normalized blue). See <code><a href="image_index.html">image_index()</a></code> for
more details.</p></dd>
<dt>object_index</dt>
<dd><p>Defaults to <code>FALSE</code>. If an index is informed, the average
value for each object is returned. It can be the R, G, and B values or any
operation involving them, e.g., <code>object_index = "R/B"</code>. In this case, it
will return for each object in the image, the average value of the R/B
ratio. Use <code><a href="utils_file.html">pliman_indexes_eq()</a></code> to see the equations of available indexes.</p></dd>
<dt>threshold</dt>
<dd><p>By default (<code>threshold = "Otsu"</code>), a threshold value based
on Otsu's method is used to reduce the grayscale image to a binary image.
If a numeric value is informed, this value will be used as a threshold.
Inform any non-numeric value different than "Otsu" to iteratively chosen
the threshold based on a raster plot showing pixel intensity of the index.</p></dd>
<dt>tolerance</dt>
<dd><p>The minimum height of the object in the units of image
intensity between its highest point (seed) and the point where it contacts
another object (checked for every contact pixel). If the height is smaller
than the tolerance, the object will be combined with one of its neighbors,
which is the highest.</p></dd>
<dt>extension</dt>
<dd><p>Radius of the neighborhood in pixels for the detection of
neighboring objects. Higher value smooths out small objects.</p></dd>
<dt>lower_size, upper_size</dt>
<dd><p>Lower and upper limits for size for the image
analysis. Plant images often contain dirt and dust. To prevent dust from
affecting the image analysis, objects with lesser than 10% of the mean of
all objects are removed. Upper limit is set to <code>NULL</code>, i.e., no upper
limit used. One can set a known area or use <code>lower_limit = 0</code> to select all
objects (not advised). Objects that matches the size of a given range of
sizes can be selected by setting up the two arguments. For example, if
<code>lower_size = 120</code> and <code>upper_size = 140</code>, objects with size greater than
or equal 120 and less than or equal 140 will be considered.</p></dd>
<dt>topn_lower, topn_upper</dt>
<dd><p>Select the top <code>n</code> objects based on its area.
<code>topn_lower</code> selects the <code>n</code> elements with the smallest area whereas
<code>topn_upper</code> selects the <code>n</code> objects with the largest area.</p></dd>
<dt>lower_eccent, upper_eccent, lower_circ, upper_circ</dt>
<dd><p>Lower and upper limit
for object eccentricity/circularity for the image analysis. Users may use
these arguments to remove objects such as square papers for scale (low
eccentricity) or cut petioles (high eccentricity) from the images. Defaults
to <code>NULL</code> (i.e., no lower and upper limits).</p></dd>
<dt>randomize</dt>
<dd><p>Randomize the lines before training the model?</p></dd>
<dt>nrows</dt>
<dd><p>The number of lines to be used in training step. Defaults to
2000.</p></dd>
<dt>show_image</dt>
<dd><p>Show image after processing?</p></dd>
<dt>show_original</dt>
<dd><p>Show the count objects in the original image?</p></dd>
<dt>show_chull</dt>
<dd><p>Show the convex hull around the objects? Defaults to
<code>FALSE</code>.</p></dd>
<dt>show_contour</dt>
<dd><p>Show a contour line around the objects? Defaults
to <code>TRUE</code>.</p></dd>
<dt>contour_col, contour_size</dt>
<dd><p>The color and size for the contour line
around objects. Defaults to <code>contour_col = "red"</code> and <code>contour_size = 1</code>.</p></dd>
<dt>show_background</dt>
<dd><p>Show the background? Defaults to <code>TRUE</code>. A white
background is shown by default when <code>show_original = FALSE</code>.</p></dd>
<dt>show_segmentation</dt>
<dd><p>Shows the object segmentation colored with random
permutations. Defaults to <code>FALSE</code>.</p></dd>
<dt>col_foreground, col_background</dt>
<dd><p>Foreground and background color after
image processing. Defaults to <code>NULL</code>, in which <code>"black"</code>, and <code>"white"</code> are
used, respectively.</p></dd>
<dt>marker, marker_col, marker_size</dt>
<dd><p>The type, color and size of the object
marker. Defaults to <code>NULL</code>, which plots the object id. Use <code>marker = "point"</code> to show a point in each object or <code>marker = FALSE</code> to omit object
marker.</p></dd>
<dt>save_image</dt>
<dd><p>Save the image after processing? The image is saved in the
current working directory named as <code>proc_*</code> where <code>*</code> is the image name
given in <code>img</code>.</p></dd>
<dt>prefix</dt>
<dd><p>The prefix to be included in the processed images. Defaults to
<code>"proc_"</code>.</p></dd>
<dt>dir_original, dir_processed</dt>
<dd><p>The directory containing the original and
processed images. Defaults to <code>NULL</code>. In this case, the function will
search for the image <code>img</code> in the current working directory. After
processing, when <code>save_image = TRUE</code>, the processed image will be also
saved in such a directory. It can be either a full path, e.g.,
<code>"C:/Desktop/imgs"</code>, or a subfolder within the current working directory,
e.g., <code>"/imgs"</code>.</p></dd>
<dt>verbose</dt>
<dd><p>If <code>TRUE</code> (default) a summary is shown in the console.</p></dd>
<dt>x</dt>
<dd><p>An object of class <code>anal_obj</code>.</p></dd>
<dt>which</dt>
<dd><p>Which to plot. Either 'measure' (object measures) or 'index'
(object index). Defaults to <code>"measure"</code>.</p></dd>
<dt>measure</dt>
<dd><p>The measure to plot. Defaults to <code>"area"</code>.</p></dd>
<dt>type</dt>
<dd><p>The type of plot. Either <code>"hist"</code> or <code>"density"</code>. Partial matches
are recognized.</p></dd>
<dt>facet</dt>
<dd><p>Create a facet plot for each object when <code>which = "index"</code> is
used?. Defaults to <code>FALSE</code>.</p></dd>
<dt>...</dt>
<dd><p>Depends on the function:</p><ul><li><p>For <code>analyze_objects_iter()</code>, further arguments passed on to
<code>analyze_objects()</code>.</p></li>
<li><p>For <code>plot.anal_obj()</code>, further argument passed on to <code><a href="https://rdrr.io/pkg/lattice/man/histogram.html" class="external-link">lattice::histogram()</a></code>
or <code><a href="https://rdrr.io/pkg/lattice/man/histogram.html" class="external-link">lattice::densityplot()</a></code></p></li>
</ul></dd>
<dt>known_area</dt>
<dd><p>The known area of the template object.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>analyze_objects()</code> returns a list with the following objects:</p><ul><li><p><code>results</code> A data frame with the following variables for each object in the
image:</p><ul><li><p><code>id</code>:  object identification.</p></li>
<li><p><code>x</code>,<code>y</code>:  x and y coordinates for the center of mass of the object.</p></li>
<li><p><code>area</code>:  area of the object (in pixels).</p></li>
<li><p><code>area_ch</code>:  the area of the convex hull around object (in pixels).</p></li>
<li><p><code>perimeter</code>: perimeter (in pixels).</p></li>
<li><p><code>radius_min</code>, <code>radius_mean</code>, and <code>radius_max</code>: The minimum, mean, and
maximum radius (in pixels), respectively.</p></li>
<li><p><code>radius_sd</code>: standard deviation of the mean radius (in pixels).</p></li>
<li><p><code>diam_min</code>, <code>diam_mean</code>, and <code>diam_max</code>: The minimum, mean, and
maximum diameter (in pixels), respectively.</p></li>
<li><p><code>major_axis</code>, <code>minor_axis</code>: elliptical fit for major and minor axes (in
pixels).</p></li>
<li><p><code>length</code>, <code>width</code> The length and width of objects (in pixels). These
measures are obtained as the range of x and y coordinates after aligning
each object with <code><a href="utils_polygon.html">poly_align()</a></code>.</p></li>
<li><p><code>radius_ratio</code>: radius ratio given by <code>radius_max / radius_min</code>.</p></li>
<li><p><code>eccentricity</code>: elliptical eccentricity computed using the
ratio of the eigen values (inertia axes of coordinates).</p></li>
<li><p><code>theta</code>: object angle (in radians).</p></li>
<li><p><code>solidity</code>: object solidity given by <code>area / area_ch</code>.</p></li>
<li><p><code>convexity</code>: The convexity of the object computed using the ratio
between the perimeter of the convex hull and the perimeter of the polygon.</p></li>
<li><p><code>elongation</code>: The elongation of the object computed as <code>1 - width / length</code>.</p></li>
<li><p><code>circularity</code>: The object circularity given by <code>perimeter ^ 2 / area</code>.</p></li>
<li><p><code>circularity_haralick</code>: The Haralick's circularity (CH), computed as
<code>CH =  m/sd</code>, where <code>m</code> and <code>sd</code> are the mean and standard deviations
from each pixels of the perimeter to the centroid of the object.</p></li>
<li><p><code>circularity_norm</code>: The normalized circularity (Cn), to be unity for a
circle. This measure is computed as `Cn = perimeter ^ 2 / 4<em>pi</em>area`` and
is invariant under translation, rotation, scaling transformations, and
dimensionless.</p></li>
<li><p><code>asm</code>: The angular second-moment feature.</p></li>
<li><p><code>con</code>: The contrast feature</p></li>
<li><p><code>cor</code>: Correlation measures the linear dependency of gray levels of
neighboring pixels.</p></li>
<li><p><code>var</code>: The variance of gray levels pixels.</p></li>
<li><p><code>idm</code>: The Inverse Difference Moment (IDM), i.e., the local
homogeneity.</p></li>
<li><p><code>sav</code>: The Sum Average.</p></li>
<li><p><code>sva</code>: The Sum Variance.</p></li>
<li><p><code>sen</code>: Sum Entropy.</p></li>
<li><p><code>dva</code>: Difference Variance.</p></li>
<li><p><code>den</code>: Difference Entropy</p></li>
<li><p><code>f12</code>: Difference Variance.</p></li>
<li><p><code>f13</code>: The angular second-moment feature.</p></li>
</ul></li>
<li><p><code>statistics</code>: A data frame with the summary statistics for the area of the
objects.</p></li>
<li><p><code>count</code>: If <code>pattern</code> is used, shows the number of objects in each image.</p></li>
<li><p><code>object_rgb</code>: If <code>object_index</code> is used, returns the R, G, and B values
for each pixel of each object.</p></li>
<li><p><code>object_index</code>: If <code>object_index</code> is used, returns the index computed for
each object.</p></li>
<li><p><code>analyze_objects_iter()</code> returns a data.frame containing the features
described in the <code>results</code> object of <code>analyze_objects()</code>.</p></li>
<li><p><code>plot.anal_obj()</code> returns a <code>trellis</code> object containing the distribution
of the pixels, optionally  for each object when <code>facet = TRUE</code> is used.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A binary image is first generated to segment the foreground and background.
The argument <code>index</code> is useful to choose a proper index to segment the image
(see <code><a href="image_binary.html">image_binary()</a></code> for more details). Then, the number of objects in the
foreground is counted. By setting up arguments such as <code>lower_size</code>,
<code>upper_size</code> it is possible to set a threshold for lower and upper sizes of
the objects, respectively. The argument <code>object_size</code> can be used to set up
pre-defined values of <code>tolerance</code> and <code>extension</code> depending on the image
resolution. This will influence the watershed-based object segmentation. Users
can also tune-up <code>tolerance</code> and <code>extension</code> explicitly to a better precision
of watershed segmentation.</p>
<p>If <code>watershed = FALSE</code> is used, all pixels for each connected set of
foreground pixels in <code>img</code> are set to a unique object. This is faster
(specially for a large number of objects) but is not able to segment touching
objects.</p>
<p>If color palettes are provided, a general linear model (binomial family)
fitted to the RGB values is used to segment fore- and background. If a color
palette for a <code>reference</code> object with a known area (<code>reference_area</code>) is
informed. The measures of the objects in the image will be corrected
considering the unit of measure informed in <code>reference_area</code>. Sample palettes
can be produced with <code><a href="palettes.html">image_palette()</a></code>.</p>
<p>By using <code>pattern</code> it is possible to process several images with common
pattern names that are stored in the current working directory or in the
subdirectory informed in <code>dir_original</code>'. To speed up the computation time,
one can set <code>parallel = TRUE</code>.</p>
<p><code>analyze_objects_iter()</code> can be used to process several images using an
object with a known area as a template. In this case, all the images in the
current working directory that matches the <code>pattern</code> will be processed. For
each image, the function will compute the features for the objects and show
the identification (id) of each object. The user only needs to inform which
is the id of the known object. Then, given the <code>known_area</code>, all the measures
will be adjusted. In the end, a data.frame with the adjusted measures will be
returned. This is useful when the images are taken at different heights. In
such cases, the image resolution cannot be conserved. Consequently, the
measures cannot be adjusted using the argument <code>dpi</code> from <code><a href="utils_measures.html">get_measures()</a></code>,
since each image will have a different resolution. NOTE: This will only work
in an interactive section.</p>
<p>The function computes 13 Haralick texture features for each object based on a
gray-level co-occurrence matrix (Haralick et al. 1979). Haralick features
depend on the configuration of the parameters  <code>har_nbins</code> and <code>har_scales</code>.
<code>har_nbins</code> controls the number of bins used to compute the Haralick matrix.
A smaller <code>har_nbins</code> can give more accurate estimates of the correlation
because the number of events per bin is higher. While a higher value will
give more sensitivity. <code>har_scales</code> controls the number of scales used to
compute the Haralick features. Since Haralick features compute the
correlation of intensities of neighboring pixels it is possible to identify
textures with different scales, e.g., a texture that is repeated every two
pixels or 10 pixels. By default, the Haralick features are computed with the
R band. To chance this default, use the argument <code>har_band</code>. For example,
<code>har_band = 2</code> will compute the features with the green band.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gupta, S., Rosenthal, D. M., Stinchcombe, J. R., &amp; Baucom, R. S. (2020). The
remarkable morphological diversity of leaf shape in sweet potato (Ipomoea
batatas): the influence of genetics, environment, and G×E. New Phytologist,
225(5), 2183–2195. <a href="https://doi.org/10.1111/NPH.16286" class="external-link">doi:10.1111/NPH.16286</a></p>
<p>Haralick, R.M., K. Shanmugam, and I. Dinstein. 1973. Textural Features for Image
Classification. IEEE Transactions on Systems, Man, and Cybernetics SMC-3(6): 610–621.
<a href="https://doi.org/10.1109/TSMC.1973.4309314" class="external-link">doi:10.1109/TSMC.1973.4309314</a></p>
<p>Lee, Y., &amp; Lim, W. (2017). Shoelace Formula: Connecting the Area of a Polygon
and the Vector Cross Product. The Mathematics Teacher, 110(8), 631–636.
<a href="https://doi.org/10.5951/mathteacher.110.8.0631" class="external-link">doi:10.5951/mathteacher.110.8.0631</a></p>
<p>Montero, R. S., Bribiesca, E., Santiago, R., &amp; Bribiesca, E. (2009). State
of the Art of Compactness and Circularity Measures. International
Mathematical Forum, 4(27), 1305–1335.</p>
<p>Chen, C.H., and P.S.P. Wang. 2005. Handbook of Pattern Recognition and
Computer Vision. 3rd ed. World Scientific.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_touch.jpg"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="va">obj</span><span class="op">$</span><span class="va">statistics</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        stat      value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         n    30.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  min_area  1368.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 mean_area  2056.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  max_area  2443.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   sd_area   230.0232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  sum_area 61680.0000</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Enumerate the objects in the original image</span></span>
<span class="r-in"><span class="co"># Return the top-5 grains with the largest area</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">top</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span>,</span>
<span class="r-in">                 marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span class="r-in">                 topn_upper <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="va">top</span><span class="op">$</span><span class="va">results</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id        x         y area area_ch perimeter radius_mean radius_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4 345.3348 105.75686 2443    2413  185.6102    27.49088   24.33975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10 469.0151  56.45596 2316    2283  181.6102    26.80966   23.15986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3 237.6504 339.80874 2311    2289  181.0244    26.69892   23.99281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6 406.9631  77.42188 2304    2268  178.7817    26.62267   24.07772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2 538.0387 401.85037 2299    2270  178.1960    26.60974   24.95488</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    radius_max radius_sd diam_mean diam_min diam_max major_axis minor_axis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    30.53159 1.7565552  54.98177 48.67950 61.06318   60.93242   51.06310</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   31.18773 2.3381509  53.61931 46.31972 62.37547   61.18631   48.21792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    29.43448 1.2403149  53.39784 47.98561 58.86897   57.49117   51.25223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    30.03551 1.6644721  53.24535 48.15544 60.07101   58.94378   49.79657</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    28.70321 0.9453011  53.21949 49.90975 57.40641   56.45901   51.87605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      length    width radius_ratio eccentricity      theta solidity convexity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  61.02071 51.02434     1.254392    0.7539797 -0.9926965 1.012433 0.9145237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 61.03697 48.69446     1.346629    0.6824269  1.2961522 1.014455 0.8647999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  57.20133 51.98953     1.226805    0.8162596 -0.5648957 1.009611 0.9112384</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  59.50243 50.79021     1.247440    0.8034516  1.1344362 1.015873 0.8767728</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  56.54173 52.42395     1.150204    0.8525173 -0.8413811 1.012775 0.8810137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    elongation circularity circularity_haralick circularity_norm        asm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.16381943    14.10198             15.65045         1.161421 0.08691588</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.20221369    14.24104             11.46618         1.174075 0.08317829</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.09111329    14.17993             21.52592         1.168866 0.08484019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.14641800    13.87279             15.99466         1.143415 0.08564560</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.07282731    13.81201             28.14949         1.138237 0.08863301</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          con       cor      var       idm      sav      sva      sen      ent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.7298578 0.9445076 7.576197 0.8011890 40.63760 1582.907 1.174546 1.358955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.8342044 0.9426903 8.278044 0.7901221 42.45991 1731.949 1.184363 1.381620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.7020281 0.9497252 7.981903 0.7941562 40.70983 1590.260 1.174603 1.357803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.7496927 0.9508846 8.631946 0.7848458 42.70254 1753.433 1.185619 1.378303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.6025756 0.9591354 8.372833 0.8067203 40.70896 1591.123 1.183855 1.355013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          dva       den       f12       f13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.7298578 0.3847632 0.5436600 0.7984089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.8342044 0.3970503 0.5197025 0.7880111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.7020281 0.3861546 0.5354312 0.7933860</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.7496927 0.3950257 0.5277220 0.7922799</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.6025756 0.3644611 0.5598796 0.8070404</span>
<span class="r-in"><span class="co"># }</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soy_green.jpg"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Segment the foreground (grains) using the normalized blue index (NB, default)</span></span>
<span class="r-in"><span class="co"># Shows the average value of the blue index in each object</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">rgb</span> <span class="op">&lt;-</span></span>
<span class="r-in">   <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span>,</span>
<span class="r-in">                   marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span class="r-in">                   object_index <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="co"># density of area</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-4.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># histogram of perimeter</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span>, measure <span class="op">=</span> <span class="st">"perimeter"</span>, type <span class="op">=</span> <span class="st">"histogram"</span><span class="op">)</span> <span class="co"># or 'hist'</span></span>
<span class="r-plt img"><img src="analyze_objects-5.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># density of the blue (B) index</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span>, which <span class="op">=</span> <span class="st">"index"</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

