<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="

analyze_objects() provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at Details section.
plot.anal_obj() Produces an histogram for the R, G, and B values when
argument object_index is used in the function analyze_objects().

"><title>Analyzes objects in an image — analyze_objects • pliman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzes objects in an image — analyze_objects"><meta property="og:description" content="

analyze_objects() provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at Details section.
plot.anal_obj() Produces an histogram for the R, G, and B values when
argument object_index is used in the function analyze_objects().

"><meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a>
    <a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a>
    <a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a>
    <a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a>
    <a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Package news</a>
    <a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-more">More</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-more">
    <a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    <a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a>
    <a class="dropdown-item" href="../SUPPORT.html">Support</a>
    <a class="dropdown-item" href="../LICENSE.html">Licence</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2">
    <span class="fab fa fab fa-researchgate fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TiagoOlivoto">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/tolivoto">
    <span class="fab fa fab fa-twitter fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa fab fa-mendeley fa-2x"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Analyzes objects in an image</h1>
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/HEAD/R/analyze_objects.R" class="external-link"><code>R/analyze_objects.R</code></a></small>
      <div class="d-none name"><code>analyze_objects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    
<ul><li><p><code>analyze_objects()</code> provides tools for counting and extracting object
features (e.g., area, perimeter, radius, pixel intensity) in an image. See
more at <strong>Details</strong> section.</p></li>
<li><p><code>plot.anal_obj()</code> Produces an histogram for the R, G, and B values when
argument <code>object_index</code> is used in the function <code>analyze_objects()</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">analyze_objects</span><span class="op">(</span>
  <span class="va">img</span>,
  foreground <span class="op">=</span> <span class="cn">NULL</span>,
  background <span class="op">=</span> <span class="cn">NULL</span>,
  pattern <span class="op">=</span> <span class="cn">NULL</span>,
  img_pattern <span class="op">=</span> <span class="cn">NULL</span>,
  parallel <span class="op">=</span> <span class="cn">FALSE</span>,
  workers <span class="op">=</span> <span class="cn">NULL</span>,
  watershed <span class="op">=</span> <span class="cn">TRUE</span>,
  resize <span class="op">=</span> <span class="cn">FALSE</span>,
  trim <span class="op">=</span> <span class="cn">FALSE</span>,
  fill_hull <span class="op">=</span> <span class="cn">FALSE</span>,
  filter <span class="op">=</span> <span class="cn">FALSE</span>,
  invert <span class="op">=</span> <span class="cn">FALSE</span>,
  object_size <span class="op">=</span> <span class="st">"medium"</span>,
  index <span class="op">=</span> <span class="st">"NB"</span>,
  my_index <span class="op">=</span> <span class="cn">NULL</span>,
  object_index <span class="op">=</span> <span class="cn">NULL</span>,
  threshold <span class="op">=</span> <span class="st">"Otsu"</span>,
  tolerance <span class="op">=</span> <span class="cn">NULL</span>,
  extension <span class="op">=</span> <span class="cn">NULL</span>,
  lower_size <span class="op">=</span> <span class="cn">NULL</span>,
  upper_size <span class="op">=</span> <span class="cn">NULL</span>,
  topn_lower <span class="op">=</span> <span class="cn">NULL</span>,
  topn_upper <span class="op">=</span> <span class="cn">NULL</span>,
  lower_eccent <span class="op">=</span> <span class="cn">NULL</span>,
  upper_eccent <span class="op">=</span> <span class="cn">NULL</span>,
  lower_circ <span class="op">=</span> <span class="cn">NULL</span>,
  upper_circ <span class="op">=</span> <span class="cn">NULL</span>,
  randomize <span class="op">=</span> <span class="cn">TRUE</span>,
  nrows <span class="op">=</span> <span class="fl">2000</span>,
  show_image <span class="op">=</span> <span class="cn">TRUE</span>,
  show_original <span class="op">=</span> <span class="cn">TRUE</span>,
  show_chull <span class="op">=</span> <span class="cn">FALSE</span>,
  show_contour <span class="op">=</span> <span class="cn">TRUE</span>,
  contour_col <span class="op">=</span> <span class="st">"red"</span>,
  contour_size <span class="op">=</span> <span class="fl">1</span>,
  show_background <span class="op">=</span> <span class="cn">TRUE</span>,
  show_segmentation <span class="op">=</span> <span class="cn">FALSE</span>,
  col_foreground <span class="op">=</span> <span class="cn">NULL</span>,
  col_background <span class="op">=</span> <span class="cn">NULL</span>,
  marker <span class="op">=</span> <span class="cn">FALSE</span>,
  marker_col <span class="op">=</span> <span class="cn">NULL</span>,
  marker_size <span class="op">=</span> <span class="cn">NULL</span>,
  save_image <span class="op">=</span> <span class="cn">FALSE</span>,
  prefix <span class="op">=</span> <span class="st">"proc_"</span>,
  dir_original <span class="op">=</span> <span class="cn">NULL</span>,
  dir_processed <span class="op">=</span> <span class="cn">NULL</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># S3 method for anal_obj</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>
  <span class="va">x</span>,
  which <span class="op">=</span> <span class="st">"measure"</span>,
  measure <span class="op">=</span> <span class="st">"area"</span>,
  type <span class="op">=</span> <span class="st">"density"</span>,
  facet <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>img</dt>
<dd><p>The image to be analyzed.</p></dd>
<dt>foreground</dt>
<dd><p>A color palette of the foreground (optional).</p></dd>
<dt>background</dt>
<dd><p>A color palette of the background (optional).</p></dd>
<dt>pattern</dt>
<dd><p>A pattern of file name used to identify images to be imported.
For example, if <code>pattern = "im"</code> all images in the current working
directory that the name matches the pattern (e.g., img1.-, image1.-, im2.-)
will be imported as a list. Providing any number as pattern (e.g., <code>pattern = "1"</code>) will select images that are named as 1.-, 2.-, and so on. An error
will be returned if the pattern matches any file that is not supported
(e.g., img1.pdf).</p></dd>
<dt>img_pattern</dt>
<dd><p>Deprecated. Use <code>pattern</code> instead.</p></dd>
<dt>parallel</dt>
<dd><p>If <code>TRUE</code> processes the images asynchronously (in parallel)
in separate R sessions running in the background on the same machine. It
may speed up the processing time, especially when <code>pattern</code> is used is
informed. When <code>object_index</code> is informed, multiple sections will be used
to extract the RGB values for each object in the image. This may
significantly speed up processing time when an image has lots of objects
(say &gt;1000).</p></dd>
<dt>workers</dt>
<dd><p>A positive numeric scalar or a function specifying the number
of parallel processes that can be active at the same time. By default, the
number of sections is set up to 50% of available cores.</p></dd>
<dt>watershed</dt>
<dd><p>If <code>TRUE</code> (default) performs watershed-based object
detection. This will detect objects even when they are touching one other.
If <code>FALSE</code>, all pixels for each connected set of foreground pixels are set
to a unique object. This is faster but is not able to segment touching
objects.</p></dd>
<dt>resize</dt>
<dd><p>Resize the image before processing? Defaults to <code>FALSE</code>. Use a
numeric value of range 0-100 (proportion of the size of the original
image).</p></dd>
<dt>trim</dt>
<dd><p>Number of pixels removed from edges in the analysis. The edges of
images are often shaded, which can affect image analysis. The edges of
images can be removed by specifying the number of pixels. Defaults to
<code>FALSE</code> (no trimmed edges).</p></dd>
<dt>fill_hull</dt>
<dd><p>Fill holes in the binary image? Defaults to <code>FALSE</code>. This is
useful to fill holes in objects that have portions with a color similar to
the background. IMPORTANT: Objects touching each other can be combined into
one single object, which may underestimate the number of objects in an
image.</p></dd>
<dt>filter</dt>
<dd><p>Performs median filtering after image processing? defaults to
<code>FALSE</code>. See more at <code><a href="utils_transform.html">image_filter()</a></code>.</p></dd>
<dt>invert</dt>
<dd><p>Inverts the binary image, if desired. This is useful to process
images with black background. Defaults to <code>FALSE</code>.</p></dd>
<dt>object_size</dt>
<dd><p>The size of the object. Used to automatically set up
<code>tolerance</code> and <code>extension</code> parameters. One of the following. <code>"small"</code>
(e.g, wheat grains), <code>"medium"</code> (e.g, soybean grains), <code>"large"</code>(e.g,
peanut grains), and <code>"elarge"</code> (e.g, soybean pods)`.</p></dd>
<dt>index, my_index</dt>
<dd><p>A character value specifying the target mode for
conversion to binary image when <code>foreground</code> and <code>background</code> are not
declared. Defaults to <code>"NB"</code> (normalized blue). See <code><a href="image_index.html">image_index()</a></code> for
more details.</p></dd>
<dt>object_index</dt>
<dd><p>Defaults to <code>FALSE</code>. If an index is informed, the average
value for each object is returned. It can be the R, G, and B values or any
operation involving them, e.g., <code>object_index = "R/B"</code>. In this case, it
will return for each object in the image, the average value of the R/B
ratio. Use <code><a href="utils_file.html">pliman_indexes_eq()</a></code> to see the equations of available indexes.</p></dd>
<dt>threshold</dt>
<dd><p>By default (<code>threshold = "Otsu"</code>), a threshold value based
on Otsu's method is used to reduce the grayscale image to a binary image.
If a numeric value is informed, this value will be used as a threshold.
Inform any non-numeric value different than "Otsu" to iteratively chosen
the threshold based on a raster plot showing pixel intensity of the index.</p></dd>
<dt>tolerance</dt>
<dd><p>The minimum height of the object in the units of image
intensity between its highest point (seed) and the point where it contacts
another object (checked for every contact pixel). If the height is smaller
than the tolerance, the object will be combined with one of its neighbors,
which is the highest.</p></dd>
<dt>extension</dt>
<dd><p>Radius of the neighborhood in pixels for the detection of
neighboring objects. Higher value smooths out small objects.</p></dd>
<dt>lower_size, upper_size</dt>
<dd><p>Lower and upper limits for size for the image
analysis. Plant images often contain dirt and dust. To prevent dust from
affecting the image analysis, objects with lesser than 10% of the mean of
all objects are removed. Upper limit is set to <code>NULL</code>, i.e., no upper
limit used. One can set a known area or use <code>lower_limit = 0</code> to select all
objects (not advised). Objects that matches the size of a given range of
sizes can be selected by setting up the two arguments. For example, if
<code>lower_size = 120</code> and <code>upper_size = 140</code>, objects with size greater than
or equal 120 and less than or equal 140 will be considered.</p></dd>
<dt>topn_lower, topn_upper</dt>
<dd><p>Select the top <code>n</code> objects based on its area.
<code>topn_lower</code> selects the <code>n</code> elements with the smallest area whereas
<code>topn_upper</code> selects the <code>n</code> objects with the largest area.</p></dd>
<dt>lower_eccent, upper_eccent, lower_circ, upper_circ</dt>
<dd><p>Lower and upper limit
for object eccentricity/circularity for the image analysis. Users may use
these arguments to remove objects such as square papers for scale (low
eccentricity) or cut petioles (high eccentricity) from the images. Defaults
to <code>NULL</code> (i.e., no lower and upper limits).</p></dd>
<dt>randomize</dt>
<dd><p>Randomize the lines before training the model?</p></dd>
<dt>nrows</dt>
<dd><p>The number of lines to be used in training step. Defaults to
2000.</p></dd>
<dt>show_image</dt>
<dd><p>Show image after processing?</p></dd>
<dt>show_original</dt>
<dd><p>Show the count objects in the original image?</p></dd>
<dt>show_chull</dt>
<dd><p>Show the convex hull around the objects? Defaults to
<code>FALSE</code>.</p></dd>
<dt>show_contour</dt>
<dd><p>Show a contour line around the objects? Defaults
to <code>TRUE</code>.</p></dd>
<dt>contour_col, contour_size</dt>
<dd><p>The color and size for the contour line
around objects. Defaults to <code>contour_col = "red"</code> and <code>contour_size = 1</code>.</p></dd>
<dt>show_background</dt>
<dd><p>Show the background? Defaults to <code>TRUE</code>. A white
background is shown by default when <code>show_original = FALSE</code>.</p></dd>
<dt>show_segmentation</dt>
<dd><p>Shows the object segmentation colored with random
permutations. Defaults to <code>FALSE</code>.</p></dd>
<dt>col_foreground, col_background</dt>
<dd><p>Foreground and background color after
image processing. Defaults to <code>NULL</code>, in which <code>"black"</code>, and <code>"white"</code> are
used, respectively.</p></dd>
<dt>marker, marker_col, marker_size</dt>
<dd><p>The type, color and size of the object
marker. Defaults to <code>NULL</code>, which plots the object id. Use <code>marker = "point"</code> to show a point in each object or <code>marker = FALSE</code> to omit object
marker.</p></dd>
<dt>save_image</dt>
<dd><p>Save the image after processing? The image is saved in the
current working directory named as <code>proc_*</code> where <code>*</code> is the image name
given in <code>img</code>.</p></dd>
<dt>prefix</dt>
<dd><p>The prefix to be included in the processed images. Defaults to
<code>"proc_"</code>.</p></dd>
<dt>dir_original, dir_processed</dt>
<dd><p>The directory containing the original and
processed images. Defaults to <code>NULL</code>. In this case, the function will
search for the image <code>img</code> in the current working directory. After
processing, when <code>save_image = TRUE</code>, the processed image will be also
saved in such a directory. It can be either a full path, e.g.,
<code>"C:/Desktop/imgs"</code>, or a subfolder within the current working directory,
e.g., <code>"/imgs"</code>.</p></dd>
<dt>verbose</dt>
<dd><p>If <code>TRUE</code> (default) a summary is shown in the console.</p></dd>
<dt>x</dt>
<dd><p>An object of class <code>anal_obj</code>.</p></dd>
<dt>which</dt>
<dd><p>Which to plot. Either 'measure' (object measures) or 'index'
(object index). Defaults to <code>"measure"</code>.</p></dd>
<dt>measure</dt>
<dd><p>The measure to plot. Defaults to <code>"area"</code>.</p></dd>
<dt>type</dt>
<dd><p>The type of plot. Either <code>"hist"</code> or <code>"density"</code>. Partial matches
are recognized.</p></dd>
<dt>facet</dt>
<dd><p>Create a facet plot for each object when <code>which = "index"</code> is
used?. Defaults to <code>FALSE</code>.</p></dd>
<dt>...</dt>
<dd><p>Further argument passed on to <code><a href="https://rdrr.io/pkg/lattice/man/histogram.html" class="external-link">lattice::histogram()</a></code> or
<code><a href="https://rdrr.io/pkg/lattice/man/histogram.html" class="external-link">lattice::densityplot()</a></code></p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>analyze_objects()</code> returns a list with the following objects:</p><ul><li><p><code>results</code> A data frame with the following variables for each object in the
image:</p><ul><li><p><code>id</code>:  object identification.</p></li>
<li><p><code>x</code>,<code>y</code>:  x and y coordinates for the center of mass of the object.</p></li>
<li><p><code>area</code>:  area of the object (in pixels).</p></li>
<li><p><code>area_ch</code>:  the area of the convex hull around object (in pixels).</p></li>
<li><p><code>perimeter</code>: perimeter (in pixels).</p></li>
<li><p><code>radius_min</code>, <code>radius_mean</code>, and <code>radius_max</code>: The minimum, mean, and
maximum radius (in pixels), respectively.</p></li>
<li><p><code>radius_sd</code>: standard deviation of the mean radius (in pixels).</p></li>
<li><p><code>radius_ratio</code>: radius ratio given by <code>radius_max / radius_min</code>.</p></li>
<li><p><code>diam_min</code>, <code>diam_mean</code>, and <code>diam_max</code>: The minimum, mean, and
maximum diameter (in pixels), respectively.</p></li>
<li><p><code>major_axis</code>, <code>minor_axis</code>: elliptical fit for major and minor axes (in
pixels).</p></li>
<li><p><code>eccentricity</code>: elliptical eccentricity defined by
sqrt(1-minoraxis^2/majoraxis^2). Circle eccentricity is 0 and straight
line eccentricity is 1.</p></li>
<li><p><code>theta</code>: object angle (in radians).</p></li>
<li><p><code>solidity</code>: object solidity given by <code>area / area_ch</code>.</p></li>
<li><p><code>circularity</code>: the object circularity given by \(4*pi *(area /
    perimeter^2)\).</p></li>
</ul></li>
<li><p><code>statistics</code>: A data frame with the summary statistics for the area of the
objects.</p></li>
<li><p><code>count</code>: If <code>pattern</code> is used, shows the number of objects in each image.</p></li>
<li><p><code>object_rgb</code>: If <code>object_index</code> is used, returns the R, G, and B values
for each pixel of each object.</p></li>
<li><p><code>object_index</code>: If <code>object_index</code> is used, returns the index computed for
each object.</p></li>
</ul><p><code>plot.anal_obj()</code> returns a <code>trellis</code> object containing the
distribution of the pixels, optionally  for each object when <code>facet = TRUE</code>is used.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A binary image is first generated to segment the foreground and background.
The argument <code>index</code> is useful to choose a proper index to segment the image
(see <code><a href="image_binary.html">image_binary()</a></code> for more details). Then, the number of objects in the
foreground is counted. By setting up arguments such as <code>lower_size</code>,
<code>upper_size</code> it is possible to set a threshold for lower and upper sizes of
the objects, respectively. The argument <code>object_size</code> can be used to set up
pre-defined values of <code>tolerance</code> and <code>extension</code> depending on the image
resolution. This will influence the watershed-based object segmentation. Users
can also tune-up <code>tolerance</code> and <code>extension</code> explicitly to a better precision
of watershed segmentation.</p>
<p>If <code>watershed = FALSE</code> is used, all pixels for each connected set of
foreground pixels in <code>img</code> are set to a unique object. This is faster
(specially for a large number of objects) but is not able to segment touching
objects.</p>
<p>If color palettes samples are provided, a general
linear model (binomial family) fitted to the RGB values is used to segment
fore- and background.</p>
<p>By using <code>pattern</code> it is possible to process several images with common
pattern names that are stored in the current working directory or in the
subdirectory informed in <code>dir_original</code>'. To speed up the computation time,
one can set <code>parallel = TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gupta, S., Rosenthal, D. M., Stinchcombe, J. R., &amp; Baucom, R. S. (2020). The
remarkable morphological diversity of leaf shape in sweet potato (Ipomoea
batatas): the influence of genetics, environment, and G×E. New Phytologist,
225(5), 2183–2195. doi: <a href="https://doi.org/10.1111/NPH.16286" class="external-link">10.1111/NPH.16286</a></p>
<p>Lee, Y., &amp; Lim, W. (2017). Shoelace Formula: Connecting the Area of a Polygon
and the Vector Cross Product. The Mathematics Teacher, 110(8), 631–636.
doi: <a href="https://doi.org/10.5951/mathteacher.110.8.0631" class="external-link">10.5951/mathteacher.110.8.0631</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soybean_touch.jpg"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="va">obj</span><span class="op">$</span><span class="va">statistics</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        stat      value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         n    30.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  min_area  1366.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 mean_area  2057.3667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  max_area  2445.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   sd_area   230.5574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  sum_area 61721.0000</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Enumerate the objects in the original image</span></span>
<span class="r-in"><span class="co"># Return the top-5 grains with the largest area</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">top</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span>,</span>
<span class="r-in">                 marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span class="r-in">                 topn_upper <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="va">top</span><span class="op">$</span><span class="va">results</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id        x         y area area_ch perimeter radius_mean radius_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4 345.3566 105.78323 2445    2406       158    27.51343   24.68250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 11 468.9970  56.42549 2315    2275       155    26.76542   23.03064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3 237.5917 339.82483 2312    2282       152    26.69878   23.96521</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5 406.9314  77.54909 2302    2264       153    26.64891   23.96546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2 538.0561 401.89604 2299    2258       153    26.60716   24.95688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    radius_max radius_sd radius_ratio diam_mean diam_min diam_max major_axis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    30.47116 1.7303597     1.234525  55.02687 49.36499 60.94232   60.92191</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   30.78003 2.3489729     1.336482  53.53085 46.06129 61.56007   61.22955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    29.04402 1.2334610     1.211924  53.39756 47.93042 58.08803   57.50966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    29.63586 1.6395963     1.236607  53.29783 47.93092 59.27173   58.85962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    28.40020 0.9346592     1.137971  53.21431 49.91376 56.80040   56.60376</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    minor_axis eccentricity      theta solidity circularity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    51.10462    0.5443558 -0.9908157 1.016209    1.230763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   48.15734    0.6175840  1.2923197 1.017582    1.210870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    51.24681    0.4538087 -0.5715211 1.013146    1.257507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    49.81918    0.5325370  1.1444750 1.016784    1.235755</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    51.73299    0.4058277 -0.8382015 1.018158    1.234144</span>
<span class="r-in"><span class="co"># }</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"soy_green.jpg"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Segment the foreground (grains) using the normalized blue index (NB, default)</span></span>
<span class="r-in"><span class="co"># Shows the average value of the blue index in each object</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">rgb</span> <span class="op">&lt;-</span></span>
<span class="r-in">   <span class="fu">analyze_objects</span><span class="op">(</span><span class="va">img</span>,</span>
<span class="r-in">                   marker <span class="op">=</span> <span class="st">"id"</span>,</span>
<span class="r-in">                   object_index <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="co"># density of area</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-4.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># histogram of perimeter</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span>, measure <span class="op">=</span> <span class="st">"perimeter"</span>, type <span class="op">=</span> <span class="st">"histogram"</span><span class="op">)</span> <span class="co"># or 'hist'</span></span>
<span class="r-plt img"><img src="analyze_objects-5.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># density of the blue (B) index</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rgb</span>, which <span class="op">=</span> <span class="st">"index"</span><span class="op">)</span></span>
<span class="r-plt img"><img src="analyze_objects-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

