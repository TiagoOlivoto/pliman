<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Analyzes objects using shapefiles"><title>Analyzes objects using shapefiles — analyze_objects_shp • pliman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzes objects using shapefiles — analyze_objects_shp"><meta property="og:description" content="Analyzes objects using shapefiles"><meta property="og:image" content="https://tiagoolivoto.github.io/pliman/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a>
    <a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a>
    <a class="dropdown-item" href="../articles/polygons.html">Polygons</a>
    <a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a>
    <a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a>
    <a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Package news</a>
    <a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-more">More</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-more">
    <a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a>
    <a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a>
    <a class="dropdown-item" href="../SUPPORT.html">Support</a>
    <a class="dropdown-item" href="../LICENSE.html">Licence</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2">
    <span class="fab fa fab fa-researchgate fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TiagoOlivoto">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/tolivoto">
    <span class="fab fa fab fa-twitter fa-2x"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/">
    <span class="fab fa fab fa-mendeley fa-2x"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Analyzes objects using shapefiles</h1>
      <small class="dont-index">Source: <a href="https://github.com/TiagoOlivoto/pliman/blob/HEAD/R/utils_shp.R" class="external-link"><code>R/utils_shp.R</code></a></small>
      <div class="d-none name"><code>analyze_objects_shp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Analyzes objects using shapefiles</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">analyze_objects_shp</span><span class="op">(</span></span>
<span>  <span class="va">img</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  buffer_x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  buffer_y <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  prepare <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  segment_objects <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  viewer <span class="op">=</span> <span class="fu"><a href="get_pliman_viewer.html">get_pliman_viewer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  index <span class="op">=</span> <span class="st">"R"</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  g <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  b <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  re <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  nir <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  shapefile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interactive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  workers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  watershed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  object_size <span class="op">=</span> <span class="st">"medium"</span>,</span>
<span>  efourier <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  object_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  veins <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>img</dt>
<dd><p>An <code>Image</code> object</p></dd>


<dt>nrow, ncol</dt>
<dd><p>The number of rows and columns to generate the shapefile
when <code>shapefile</code> is not declared. Defaults to <code>1</code>.</p></dd>


<dt>buffer_x, buffer_y</dt>
<dd><p>Buffering factor for the width and height,
respectively, of each individual shape's side. A value between 0 and 0.5 where 0
means no buffering and 0.5 means complete buffering (default: 0). A value of
0.25 will buffer the shape by 25% on each side.</p></dd>


<dt>prepare</dt>
<dd><p>Logical value indicating whether to prepare the image for
analysis using <code><a href="image_prepare.html">image_prepare()</a></code> function. Defaults to <code>FALSE</code>. Set to
<code>TRUE</code> to interactively align and crop the image before processing.</p></dd>


<dt>segment_objects</dt>
<dd><p>Segment objects in the image? Defaults to <code>TRUE</code>. In
this case, objects are segmented using the index defined in the <code>index</code>
argument, and each object is analyzed individually. If <code>segment_objects = FALSE</code> is used, the objects are not segmented and the entire image is
analyzed. This is useful, for example, when analyzing an image without
background, where an <code>object_index</code> could be computed for the entire image,
like the index of a crop canopy.</p></dd>


<dt>viewer</dt>
<dd><p>The viewer option. If not provided, the value is retrieved
using <code><a href="get_pliman_viewer.html">get_pliman_viewer()</a></code>. This option controls the type of viewer to use
for interactive plotting. The available options are "base" and "mapview".
If set to "base", the base R graphics system is used for interactive
plotting. If set to "mapview", the mapview package is used. To set this
argument globally for all functions in the package, you can use the
<code><a href="set_pliman_viewer.html">set_pliman_viewer()</a></code> function. For example, you can run
<code>set_pliman_viewer("mapview")</code> to set the viewer option to "mapview" for
all functions.</p></dd>


<dt>index</dt>
<dd><p>A character value specifying the target mode for conversion to
binary image when <code>foreground</code> and <code>background</code> are not declared. Defaults
to <code>"NB"</code> (normalized blue). See <code><a href="image_index.html">image_index()</a></code> for more details. User can
also calculate your own index using the bands names, e.g. <code>index = "R+B/G"</code></p></dd>


<dt>r, g, b, re, nir</dt>
<dd><p>The red, green, blue, red-edge, and near-infrared bands
of the image, respectively. Defaults to 1, 2, 3, 4, and 5, respectively. If
a multispectral image is provided (5 bands), check the order of bands,
which are frequently presented in the 'BGR' format.</p></dd>


<dt>shapefile</dt>
<dd><p>(Optional) An object created with <code><a href="image_shp.html">image_shp()</a></code>. If <code>NULL</code>
(default), both <code>nrow</code> and <code>ncol</code> must be declared.</p></dd>


<dt>interactive</dt>
<dd><p>If <code>FALSE</code> (default) the grid is created automatically
based on the image dimension and number of nrow/columns. If <code>interactive = TRUE</code>, users must draw points at the diagonal of the desired bounding box
that will contain the grid.</p></dd>


<dt>plot</dt>
<dd><p>Plots the processed images? Defaults to <code>FALSE</code>.</p></dd>


<dt>parallel</dt>
<dd><p>If <code>TRUE</code> processes the images asynchronously (in parallel) in
separate R sessions running in the background on the same machine. It may
speed up the processing time, especially when <code>pattern</code> is used is informed.
When <code>object_index</code> is informed, multiple sections will be used to extract
the RGB values for each object in the image. This may significantly speed up
processing time when an image has lots of objects (say &gt;1000).</p></dd>


<dt>workers</dt>
<dd><p>A positive numeric scalar or a function specifying the number
of parallel processes that can be active at the same time. By default, the
number of sections is set up to 30% of available cores.</p></dd>


<dt>watershed</dt>
<dd><p>If <code>TRUE</code> (default) performs watershed-based object
detection. This will detect objects even when they are touching one other.
If <code>FALSE</code>, all pixels for each connected set of foreground pixels are set
to a unique object. This is faster but is not able to segment touching
objects.</p></dd>


<dt>filter</dt>
<dd><p>Performs median filtering in the binary image? See more at
<code><a href="utils_transform.html">image_filter()</a></code>. Defaults to <code>FALSE</code>. Use a positive integer to define the
size of the median filtering. Larger values are effective at removing noise,
but adversely affect edges.</p></dd>


<dt>object_size</dt>
<dd><p>Argument to control control the watershed segmentation.
See <code><a href="analyze_objects.html">analyze_objects()</a></code> for more details.</p></dd>


<dt>efourier</dt>
<dd><p>Logical argument indicating if Elliptical Fourier should be
computed for each object. This will call <code><a href="efourier.html">efourier()</a></code> internally. It
<code>efourier = TRUE</code> is used, both standard and normalized Fourier coefficients
are returned.</p></dd>


<dt>object_index</dt>
<dd><p>Defaults to <code>FALSE</code>. If an index is informed, the average
value for each object is returned. It can be the R, G, and B values or any
operation involving them, e.g., <code>object_index = "R/B"</code>. In this case, it
will return for each object in the image, the average value of the R/B
ratio. Use <code><a href="utils_file.html">pliman_indexes_eq()</a></code> to see the equations of available indexes.</p></dd>


<dt>veins</dt>
<dd><p>Logical argument indicating whether vein features are computed.
This will call <code><a href="object_edge.html">object_edge()</a></code> and applies the Sobel-Feldman Operator to
detect edges. The result is the proportion of edges in relation to the
entire area of the object(s) in the image. Note that <strong>THIS WILL BE AN
OPERATION ON AN IMAGE LEVEL, NOT OBJECT!</strong>.</p></dd>


<dt>verbose</dt>
<dd><p>If <code>TRUE</code> (default) a summary is shown in the console.</p></dd>


<dt>invert</dt>
<dd><p>Inverts the binary image if desired. This is useful to process
images with a black background. Defaults to <code>FALSE</code>. If <code>reference = TRUE</code>
is use, <code>invert</code> can be declared as a logical vector of length 2 (eg.,
<code>invert = c(FALSE, TRUE</code>). In this case, the segmentation of objects and
reference from the foreground using <code>back_fore_index</code> is performed using the
default (not inverted), and the segmentation of objects from the reference
is performed by inverting the selection (selecting pixels higher than the
threshold).</p></dd>


<dt>...</dt>
<dd><p>Aditional arguments passed on to <a href="analyze_objects.html">analyze_objects</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>anal_obj</code>. See more details in the <code>Value</code></p>


<p>section of <code><a href="analyze_objects.html">analyze_objects()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>analyze_objects_shp</code> function performs object analysis on an
image and generates shapefiles representing the analyzed objects. The
function first prepares the image for analysis using the <code><a href="image_prepare.html">image_prepare()</a></code>
function if the <code>prepare</code> argument is set to <code>TRUE</code>. If a shapefile object is
provided, the number of rows and columns for splitting the image is obtained
from the shapefile. Otherwise, the image is split into multiple sub-images
based on the specified number of rows and columns using the
<code><a href="object_split_shp.html">object_split_shp()</a></code> function. The objects in each sub-image are analyzed
using the <code><a href="analyze_objects.html">analyze_objects()</a></code> function, and the results are stored in a list.
If parallel processing is enabled, the analysis is performed in parallel
using multiple workers.</p>
<p>The output object provides access to various components of the analysis
results, such as the analyzed object coordinates and properties.
Additionally, the shapefiles representing the analyzed objects are included
in the output object for further analysis or visualization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TiagoOlivoto/pliman" class="external-link">pliman</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Computes the DGCI index for each flax leaf</span></span></span>
<span class="r-in"><span><span class="va">flax</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"flax_leaves.jpg"</span>, plot <span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu">analyze_objects_shp</span><span class="op">(</span><span class="va">flax</span>,</span></span>
<span class="r-in"><span>                       nrow <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                       ncol <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>                       plot <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       object_index <span class="op">=</span> <span class="st">"DGCI"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">flax</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">shapefiles</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="utils_measures.html">plot_measures</a></span><span class="op">(</span><span class="va">res</span>, measure <span class="op">=</span> <span class="st">"DGCI"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

